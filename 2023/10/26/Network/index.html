

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta name="google-site-verification" content="7TXW9ttER52MwKw3U6lTa3NKEZw2koxmAO7iJcMTT8c" />
  <meta name="baidu-site-verification" content="codeva-1kmvb8u2lB" />
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202309302055622.jpg">
  <link rel="icon" href="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202309302055622.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Kolin">
  <meta name="keywords" content="">
  
    <meta name="description" content="深入浅出计算机网络">
<meta property="og:type" content="article">
<meta property="og:title" content="Computer Network">
<meta property="og:url" content="https://www.renkelin.vip/2023/10/26/Network/index.html">
<meta property="og:site_name" content="Kolin&#39;s space">
<meta property="og:description" content="深入浅出计算机网络">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260011522.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260012975.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260014487.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260018798.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260018810.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260022343.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260029257.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260029126.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260033728.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262042409.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262051836.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262059189.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262113004.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262113000.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262110719.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109369.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109812.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109255.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109358.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262138602.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262147684.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262150896.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262157580.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262159308.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262205735.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262211765.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262228834.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262245049.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262245583.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262247829.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262312529.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310271420463.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310271435876.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290013451.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290016144.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290016451.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290018537.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290025485.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310292304577.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310292309471.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310301307192.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302059586.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103190.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103106.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103689.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302129516.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302135783.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302229145.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302246888.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022338331.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022343344.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022351562.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022351906.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030005371.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030011796.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030054409.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031055022.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031112666.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031113524.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031116801.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031117632.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031118300.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031122721.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031723083.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031732120.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031735560.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031737470.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031739554.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031740472.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031804364.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031807591.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031819664.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032309952.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032321651.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032346999.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032349618.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032354037.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311040009777.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311040020983.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042130438.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042135295.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042143501.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042148048.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042154336.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042224465.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042235348.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042238352.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070950535.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070950617.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070956717.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070959617.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071014671.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071014172.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071028380.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071031861.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071031926.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071328410.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071332642.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071332719.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071337269.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071846737.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071850257.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071905484.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071907977.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071913954.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071914763.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071922767.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071925393.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072211310.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072231298.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072234032.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072317966.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072323069.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131316008.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131317477.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131330289.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131340543.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131341431.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131343767.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132006353.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132006696.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132013918.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132025212.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132030817.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132032419.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012124856.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012128759.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012152888.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012156884.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012157701.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012200758.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012219123.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012225913.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012225538.png">
<meta property="og:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012236511.png">
<meta property="article:published_time" content="2023-10-25T15:00:00.000Z">
<meta property="article:modified_time" content="2023-12-01T13:37:59.190Z">
<meta property="article:author" content="Kolin">
<meta property="article:tag" content="Network">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260011522.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Computer Network - Kolin&#39;s space</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.renkelin.vip","root":"/","version":"1.9.5-a","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Kolin's space" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Kolin&#39;s space</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202309302057061.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Computer Network"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-26 00:00" pubdate>
          October 26, 2023 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          29k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          245 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Computer Network</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="因特网概述"><a href="#因特网概述" class="headerlink" title="因特网概述"></a>因特网概述</h3><h4 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260011522.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="互联网"><a href="#互联网" class="headerlink" title="互联网"></a>互联网</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260012975.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="因特网"><a href="#因特网" class="headerlink" title="因特网"></a>因特网</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260014487.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="区别与关系"><a href="#区别与关系" class="headerlink" title="区别与关系"></a>区别与关系</h4><ul>
<li>若干节点和链路互连形成<font color = '#DC143C'><strong>网络</strong></font></li>
<li>若干网络通过路由器互连形成<font color = '#DC143C'><strong>互连网（互联网）</strong></font></li>
<li><font color = '#DC143C'><strong>因特网</strong></font>是当今世界上最大的互联网</li>
</ul>
<h4 id="因特网简介"><a href="#因特网简介" class="headerlink" title="因特网简介"></a>因特网简介</h4><blockquote>
<p>因特网发展的三个阶段</p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260018798.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>因特网服务提供者（Internet Service Provider, ISP）</p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260018810.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>因特网已发展成为<font color = '#DC143C'><strong>基于ISP的多层次结构的互连网络</strong></font></p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260022343.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>因特网的<font color = '#DC143C'><strong>标准化</strong></font>工作</p>
</blockquote>
<ul>
<li>因特网的标准化工作是面向公众的，其任何一个建议标准在成为因特网标准之前都以 RFC 技术文档的形式在因特网上发表</li>
<li>RFC（Request For Comments）的意思是”请求评论”。任何人都可以从因特网上免费下载 <a target="_blank" rel="noopener" href="http://www.ietf.org/rfc,html">RFC</a> 文档，并随时对某个 RFC 文档发表意见和建议</li>
</ul>
<blockquote>
<p>因特网的<font color = '#DC143C'><strong>管理机构</strong></font></p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260029257.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>因特网的<font color = '#DC143C'><strong>组成</strong></font></p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260029126.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="电路交换、分组交换和报文交换"><a href="#电路交换、分组交换和报文交换" class="headerlink" title="电路交换、分组交换和报文交换"></a>电路交换、分组交换和报文交换</h3><h4 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310260033728.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><font color = '#DC143C'><strong>计算机之间的数据传送时突发式</strong></font>的，当<font color = '#DC143C'><strong>使用电路交换</strong></font>来传送计算机数据时，其<font color = '#DC143C'><strong>线路的传输效率一般都会很低</strong></font>，线路上真正用来传送数据的时间往往不到10%甚至1%</li>
</ul>
<h4 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262042409.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>没有建立连接和释放连接的过程</li>
<li>分组传输过程中逐段占用通信链路，有较高的通信线路利用率</li>
<li>交换节点可以为每一个分组独立选择转发路由，使得网络有很好的生存性</li>
</ul>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><ul>
<li>分组首部带来了额外的传输开销</li>
<li>交换节点存储转发分组会造成一定的时延</li>
<li>无法确保通信时端到通信资源全部可用，在通信量较大时可能造成网络拥塞</li>
<li>分组可能会出现失序和丢失等问题</li>
</ul>
<h4 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h4><ul>
<li>报文交换时分组交换的前身</li>
<li>在报文交换中，<font color = '#DC143C'><strong>报文被整个地发送</strong></font>，而不是拆分成若干个分组进行发送</li>
<li>交换节点将报文<font color = '#DC143C'><strong>整体接收完成后</strong></font>才能查找转发表，将整个报文<font color = '#DC143C'><strong>转发</strong></font>到下一个节点</li>
<li>因此，报文交换比分组交换带来的<font color = '#DC143C'><strong>转发时延要长很多</strong></font>，需要交换节点具有的<font color = '#DC143C'><strong>缓存空间也大很多</strong></font></li>
</ul>
<h4 id="三种交换方式的对比"><a href="#三种交换方式的对比" class="headerlink" title="三种交换方式的对比"></a>三种交换方式的对比</h4><ul>
<li>若要连续传送大量的数据，并且数据传送时间远大于建立连接的时间，则使用电路交换可以有较高的传输效率。然而<font color = '#DC143C'><strong>计算机的数据传送</strong></font>往往是<font color = '#DC143C'><strong>突发式</strong></font>的，<font color = '#DC143C'><strong>采用电路交换</strong></font>时通信<font color = '#DC143C'><strong>线路的利用率会很低</strong></font></li>
<li>报文交换和分组交换都<font color = '#DC143C'><strong>不需要建立连接</strong></font>（即预先分配通信资源），在<font color = '#DC143C'><strong>传送计算机的突发数据</strong></font>时可以<font color = '#DC143C'><strong>提高通信线路的利用率</strong></font></li>
<li>将报文构造成若干个更小的分组进行<font color = '#DC143C'><strong>分组交换</strong></font>，比将整个报文进行报文交换的<font color = '#DC143C'><strong>时延更小</strong></font>，并且还可以<font color = '#DC143C'><strong>避免太长的报文长时间占用链路，有利于差错控制</strong></font>，同时具有更好的灵活性</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262051836.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="计算机网络的定义和分类"><a href="#计算机网络的定义和分类" class="headerlink" title="计算机网络的定义和分类"></a>计算机网络的定义和分类</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262059189.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>现阶段计算机网络的一个较好的定义</p>
</blockquote>
<ul>
<li>计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用</li>
</ul>
<h5 id="可编程的硬件"><a href="#可编程的硬件" class="headerlink" title="可编程的硬件"></a>可编程的硬件</h5><ul>
<li>不限于计算机，而是包括了智能手机、具有网络功能的传感器以及智能家电等智能硬件，这些硬件一定包含有中央处理单元（CPU）</li>
</ul>
<h5 id="各类应用"><a href="#各类应用" class="headerlink" title="各类应用"></a>各类应用</h5><ul>
<li>计算机网络并非只用来传送数据，而是能够基于数据传送进而实现各种各样的应用，包括今后可能出现的各种应用</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><h5 id="交换方式"><a href="#交换方式" class="headerlink" title="交换方式"></a>交换方式</h5><ul>
<li>电路交换</li>
<li>报文交换</li>
<li>分组交换</li>
</ul>
<h5 id="使用者"><a href="#使用者" class="headerlink" title="使用者"></a>使用者</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262113004.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="传输介质"><a href="#传输介质" class="headerlink" title="传输介质"></a>传输介质</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262113000.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="覆盖范围"><a href="#覆盖范围" class="headerlink" title="覆盖范围"></a>覆盖范围</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262110719.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="拓扑结构"><a href="#拓扑结构" class="headerlink" title="拓扑结构"></a>拓扑结构</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109369.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109812.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109255.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262109358.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="计算机网络的性能指标"><a href="#计算机网络的性能指标" class="headerlink" title="计算机网络的性能指标"></a>计算机网络的性能指标</h3><ul>
<li>计算机网络的性能指标被用来从不同方面<font color = '#DC143C'><strong>度量计算机网络的性能</strong></font></li>
<li>常用的八个计算机网络性能指标<ul>
<li>速率、带宽、吞吐量、时延、时延带宽积、往返时间、利用率、丢包率</li>
</ul>
</li>
</ul>
<h4 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h4><ul>
<li><font color = '#DC143C'><strong>比特</strong></font>（bit，记为小写b）是计算机中<font color = '#DC143C'><strong>数据量的基本单位</strong></font>，一个比特就是<font color = '#DC143C'><strong>二进制数字中的一个 1 或 0</strong></font></li>
<li>数据量的常用单位有<font color = '#DC143C'><strong>字节</strong></font>（byte，记为大写B）、<font color = '#DC143C'><strong>千字节</strong></font>（KB）、<font color = '#DC143C'><strong>兆字节</strong></font>（MB）、<font color = '#DC143C'><strong>吉字节</strong></font>（GB）、<font color = '#DC143C'><strong>太字节</strong></font>（TB）</li>
</ul>
<table>
<thead>
<tr>
<th>数据量的单位</th>
<th>换算关系</th>
</tr>
</thead>
<tbody><tr>
<td>比特（b）</td>
<td>基本单位</td>
</tr>
<tr>
<td>字节（B）</td>
<td>1B &#x3D; 8bit</td>
</tr>
<tr>
<td>千字节（KB）</td>
<td>KB &#x3D; 2^10 B</td>
</tr>
<tr>
<td>兆字节（MB）</td>
<td>MB &#x3D; K·KB &#x3D; 2^20 B</td>
</tr>
<tr>
<td>吉字节（GB）</td>
<td>GB &#x3D; K·MB &#x3D; 2^30 B</td>
</tr>
<tr>
<td>太字节（TB）</td>
<td>TB &#x3D; K·GB &#x3D; 2^40 B</td>
</tr>
</tbody></table>
<ul>
<li>速率是<font color = '#DC143C'><strong>指数据的传送速率</strong></font>（即<font color = '#DC143C'><strong>每秒传送多少个比特</strong></font>），也称为<font color = '#DC143C'><strong>数据率</strong></font>（Data Rate）或<font color = '#DC143C'><strong>比特率</strong></font>（Bit Rate）</li>
<li>速率的基本单位是<font color = '#DC143C'><strong>比特&#x2F;秒</strong></font>（bit&#x2F;s，可简记为b&#x2F;s，有时也记为bps，即bit per second）。速率的常用单位有<font color = '#DC143C'><strong>千比特&#x2F;秒</strong></font>（kb&#x2F;s或kbps）、<font color = '#DC143C'><strong>兆比特&#x2F;秒</strong></font>（Mb&#x2F;s或Mbps）、<font color = '#DC143C'><strong>吉比特&#x2F;秒</strong></font>（Gb&#x2F;s或Gbps）以及<font color = '#DC143C'><strong>太比特&#x2F;秒</strong></font>（Tb&#x2F;s或Tbps）</li>
</ul>
<table>
<thead>
<tr>
<th>速率的单位</th>
<th>换算关系</th>
</tr>
</thead>
<tbody><tr>
<td>比特&#x2F;秒（b&#x2F;s）</td>
<td>基本单位</td>
</tr>
<tr>
<td>千比特&#x2F;秒（kb&#x2F;s）</td>
<td>kb&#x2F;s &#x3D; 10^3 b&#x2F;s</td>
</tr>
<tr>
<td>兆比特&#x2F;秒（Mb&#x2F;s）</td>
<td>Mb&#x2F;s &#x3D; k·kb&#x2F;s &#x3D; 10^6 b&#x2F;s</td>
</tr>
<tr>
<td>吉比特&#x2F;秒（Gb&#x2F;s）</td>
<td>Gb&#x2F;s &#x3D; k·Mb&#x2F;s &#x3D; 10^9 b&#x2F;s</td>
</tr>
<tr>
<td>太比特&#x2F;秒（Tb&#x2F;s）</td>
<td>Tb&#x2F;s &#x3D; k·Gb&#x2F;s &#x3D; 10^12 b&#x2F;s</td>
</tr>
</tbody></table>
<h5 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h5><ul>
<li>有一个待发送的数据块，大小为100MB，网卡的发送速率为100Mbps，则网卡发送完该数据块需要多长时间？</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262138602.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h4><blockquote>
<p>模拟信号系统中的意义</p>
</blockquote>
<ul>
<li>某个信号所包含的各种不同频率成分所占据的<font color = '#DC143C'><strong>频率范围</strong></font></li>
<li>单位：Hz（kHz，MHz，GHz）</li>
</ul>
<blockquote>
<p>计算机网络中的意义</p>
</blockquote>
<ul>
<li>用来表示网络的<font color = '#DC143C'><strong>通信线路所能传送数据的能力</strong></font>，即在单位时间内从网络中的某一点到另一点所能通过的<font color = '#DC143C'><strong>最高数据率</strong></font></li>
<li>单位：b&#x2F;s（kb&#x2F;s，Mb&#x2F;s，Gb&#x2F;s，Tb&#x2F;s）</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262147684.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><ul>
<li><p>吞吐量是指在<font color = '#DC143C'><strong>单位时间内通过某个网络或接口的实际数据量</strong></font>。吞吐量常被用于对实际网络的测量，以便获知到底有多少数据量通过了网络</p>
</li>
<li><p>吞吐量<font color = '#DC143C'><strong>受网络带宽的限制</strong></font></p>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262150896.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h4><ul>
<li>时延是指数据从网络的一端传送到另一端所耗费的时间，也成为延迟或时延&#x2F;数据可由一个或多个分组、甚至是一个比特构成</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262157580.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262159308.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="时延带宽积"><a href="#时延带宽积" class="headerlink" title="时延带宽积"></a>时延带宽积</h4><ul>
<li>时延带宽积是<font color = '#DC143C'><strong>传播时延</strong></font>和<font color = '#DC143C'><strong>带宽</strong></font>的乘积</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262205735.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>链路的时延带宽积也称为<font color = '#DC143C'><strong>以比特位单位的链路长度</strong></font></li>
</ul>
<h4 id="往返时间"><a href="#往返时间" class="headerlink" title="往返时间"></a>往返时间</h4><ul>
<li>往返时间（Round-Trip <font color = '#DC143C'><strong>RTT</strong></font>）是指从发送端发送数据分组开始，到发送端收到接收端发来的相应确认分组为止，总共耗费的时间</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262211765.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="利用率"><a href="#利用率" class="headerlink" title="利用率"></a>利用率</h4><blockquote>
<p>链路利用率</p>
</blockquote>
<ul>
<li>链路利用率是指某条链路有百分之几的时间是被利用的（即有数据通过）</li>
<li>完全空闲的链路的利用率为零</li>
</ul>
<blockquote>
<p>网络利用率</p>
</blockquote>
<ul>
<li>网络利用率是指网络中所有链路的链路利用率的加权平均</li>
</ul>
<blockquote>
<p>定义</p>
</blockquote>
<ul>
<li>根据排队论可知，<font color = '#DC143C'><strong>当某链路的利用率增大时</strong></font>，<font color = '#DC143C'><strong>该链路引起的时延就会迅速增加</strong></font></li>
<li>当网络的通信量较少时，产生的时延并不大，但在网络通信量不断增大时，<font color = '#DC143C'><strong>分组在交换节点（路由器或交换机）中的排队时延会随之增大</strong></font>，因此网络引起的时延就会增大</li>
<li>令D0表示网络空闲时的时延，D表示网络当前的时延，那么在理想的假定条件下，可用下式来表示D、D0和网络利用率U之间的关系</li>
</ul>
<p>$$<br>D &#x3D; \frac{D_0}{1 - U}<br>$$</p>
<h4 id="丢包率"><a href="#丢包率" class="headerlink" title="丢包率"></a>丢包率</h4><ul>
<li>丢包率是指在一定的时间范围内，传输过程中<font color = '#DC143C'><strong>丢失的分组数量与总分组数量的比率</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262228834.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>分组丢失主要有以下两种情况：<ul>
<li>分组在传输过程中出现<font color = '#DC143C'><strong>误码</strong></font>，被传输路径中的<font color = '#DC143C'><strong>节点交换机</strong></font>（例如路由器）或<font color = '#DC143C'><strong>目的主机</strong></font>检测出误码而<font color = '#DC143C'><strong>丢弃</strong></font></li>
<li>节点交换机根据<font color = '#DC143C'><strong>丢弃策略</strong></font>主动丢弃分组</li>
</ul>
</li>
<li>丢包率可以反映网络的拥塞情况<ul>
<li>无拥塞时路径丢包率为0</li>
<li>轻度拥塞时路径丢包率为1%~4%</li>
<li>严重拥塞时路径丢包率为5%~15%</li>
</ul>
</li>
</ul>
<h3 id="常见的三种计算机网格体系结构"><a href="#常见的三种计算机网格体系结构" class="headerlink" title="常见的三种计算机网格体系结构"></a>常见的三种计算机网格体系结构</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262245049.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>OSI标准失败的原因</p>
</blockquote>
<ul>
<li>专家没有实际经验，完成标准时没有商业驱动力</li>
<li>协议实现过分复杂，运行效率很低</li>
<li>标准的制定周期太长，产品无法即时进入市场</li>
<li>层次划分不太合理，有些功能在多个层次中重复出现</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262245583.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="计算机网络体系结构分层的必要性"><a href="#计算机网络体系结构分层的必要性" class="headerlink" title="计算机网络体系结构分层的必要性"></a>计算机网络体系结构分层的必要性</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262247829.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><blockquote>
<p>物理层</p>
</blockquote>
<ul>
<li>采用什么<font color = '#DC143C'><strong>传输媒体</strong></font>（介质）（物理层之下）</li>
<li>采用什么<font color = '#DC143C'><strong>物理接口</strong></font></li>
<li>采用什么<font color = '#DC143C'><strong>信号</strong></font>表示比特0和1</li>
</ul>
<blockquote>
<p>数据链路层</p>
</blockquote>
<ul>
<li>标识网络中各主机（<font color = '#DC143C'><strong>主机编址</strong></font>，例如MAC地址）</li>
<li>从比特流中区分出地址和数据（<font color = '#DC143C'><strong>数据封装格式</strong></font>）</li>
<li>协调各主机争用总线（<font color = '#DC143C'><strong>媒体接入控制</strong></font>）</li>
<li>以太网交换机的实现（<font color = '#DC143C'><strong>自学习和转发帧</strong></font>）</li>
<li>监测数据是否误码（<font color = '#DC143C'><strong>差错检测</strong></font>）</li>
<li>出现传输差错如何处理（<font color = '#DC143C'><strong>可靠传输和不可靠传输</strong></font>）</li>
<li>接收方控制发送方注入网络的数据量（<font color = '#DC143C'><strong>流量控制</strong></font>）</li>
</ul>
<blockquote>
<p>网络层</p>
</blockquote>
<ul>
<li>标识网络和网络中的各主机（<font color = '#DC143C'><strong>网络和主机共同编址</strong></font>，例如IP地址）</li>
<li>路由器转发分组（<font color = '#DC143C'><strong>路由选择协议、路由表和转发表</strong></font>）</li>
</ul>
<blockquote>
<p>运输层</p>
</blockquote>
<ul>
<li>进程之间基于网络的通信（<font color = '#DC143C'><strong>进程的标识</strong></font>，例如端口号）</li>
<li>出现传输差错如何处理（<font color = '#DC143C'><strong>可靠传输和不可靠传输</strong></font>）</li>
</ul>
<blockquote>
<p>应用层</p>
</blockquote>
<ul>
<li>通过应用进程间的交互来完成特定的网络应用</li>
<li>进行会话管理和数据表示</li>
</ul>
<h3 id="计算机网络体系结构分层思想"><a href="#计算机网络体系结构分层思想" class="headerlink" title="计算机网络体系结构分层思想"></a>计算机网络体系结构分层思想</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310262312529.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="计算机网络体系结构中专用术语"><a href="#计算机网络体系结构中专用术语" class="headerlink" title="计算机网络体系结构中专用术语"></a>计算机网络体系结构中专用术语</h3><h4 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h4><ul>
<li><font color = '#DC143C'><strong>实体</strong></font>是指任何可发送或接收信息的<font color = '#DC143C'><strong>硬件</strong></font>或<font color = '#DC143C'><strong>软件进程</strong></font></li>
<li><font color = '#DC143C'><strong>对等实体</strong></font>是指通信双方<font color = '#DC143C'><strong>相同层次中的实体</strong></font></li>
</ul>
<h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><ul>
<li><font color = '#DC143C'><strong>协议</strong></font>是控制两个对等实体在 “<font color = '#DC143C'><strong>水平方向</strong></font>“ 进行 “<font color = '#DC143C'><strong>逻辑通信</strong></font>“ 的<font color = '#DC143C'><strong>规则</strong></font>的集合</li>
<li>协议的<font color = '#DC143C'><strong>三要素</strong></font><ul>
<li><font color = '#DC143C'><strong>语法</strong></font>：定义所交换信息的<font color = '#DC143C'><strong>格式</strong></font></li>
<li><font color = '#DC143C'><strong>语义</strong></font>：定义通信双方所要完成的<font color = '#DC143C'><strong>操作</strong></font></li>
<li><font color = '#DC143C'><strong>同步</strong></font>：定义通信双方的<font color = '#DC143C'><strong>时序关系</strong></font></li>
</ul>
</li>
</ul>
<h4 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h4><ul>
<li>在协议的控制下，<font color = '#DC143C'><strong>两个对等实体在水平方向的逻辑通信使得本层能够向上一层提供服务</strong></font><ul>
<li>要实现本层协议，还需要使用下面一层所提供的服务</li>
<li>协议是 “<font color = '#DC143C'><strong>水平</strong></font>“ 的，而服务是 “<font color = '#DC143C'><strong>垂直</strong></font>“ 的</li>
<li>实体看得见下层提供的服务，但并不知道实现该服务的具体协议。下层的协议对上层的实体是 “<font color = '#DC143C'><strong>透明</strong></font>“ 的</li>
</ul>
</li>
<li>在同一系统中<font color = '#DC143C'><strong>相邻两层的实体交换信息的逻辑接口</strong></font>称为<font color = '#DC143C'><strong>服务访问点SAP</strong></font>，它被用于区分不同的服务类型</li>
<li>帧的 “类型” 字段、IP数据报的 “协议” 字段，TCP报文段或UDP用户数据报的 “端口号” 字段都是SAP</li>
<li>上层要使用下层所提供的服务，必须通过与下层<font color = '#DC143C'><strong>交换一些命令</strong></font>，这些命令称为<font color = '#DC143C'><strong>服务原语</strong></font></li>
<li>对等层次之间传送的数据包称为该层的<font color = '#DC143C'><strong>协议数据单元</strong></font>（Protocol Data Unit，<font color = '#DC143C'><strong>PDU</strong></font>）</li>
<li>同一系统内层与层之间交换的数据包称为<font color = '#DC143C'><strong>服务数据单元</strong></font>（Service Data Unit，<font color = '#DC143C'><strong>SDU</strong></font>）</li>
</ul>
<h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><h4 id="物理层要实现的功能"><a href="#物理层要实现的功能" class="headerlink" title="物理层要实现的功能"></a>物理层要实现的功能</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310271420463.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="物理层接口特性"><a href="#物理层接口特性" class="headerlink" title="物理层接口特性"></a>物理层接口特性</h4><h5 id="机械特性"><a href="#机械特性" class="headerlink" title="机械特性"></a>机械特性</h5><ul>
<li>形状和尺寸</li>
<li>引脚数目和排列</li>
<li>固定和锁定装置</li>
</ul>
<h5 id="电气特性"><a href="#电气特性" class="headerlink" title="电气特性"></a>电气特性</h5><ul>
<li>信号电压的范围</li>
<li>阻抗匹配的情况</li>
<li>传输速率</li>
<li>距离限制</li>
</ul>
<h5 id="功能特性"><a href="#功能特性" class="headerlink" title="功能特性"></a>功能特性</h5><ul>
<li>规定接口电缆的各条信号线的作用</li>
</ul>
<h5 id="过程特性"><a href="#过程特性" class="headerlink" title="过程特性"></a>过程特性</h5><ul>
<li>规定在信号线上传输比特流的一组操作过程，包括各信号间的时序关系</li>
</ul>
<h3 id="物理层下面的传输媒体"><a href="#物理层下面的传输媒体" class="headerlink" title="物理层下面的传输媒体"></a>物理层下面的传输媒体</h3><h4 id="传输媒体的分类"><a href="#传输媒体的分类" class="headerlink" title="传输媒体的分类"></a>传输媒体的分类</h4><ul>
<li><font color = '#DC143C'><strong>传输媒体</strong></font>是计算机网络设备之间的物理通路，也称为传输介质或传输媒介</li>
<li>传输媒体并<font color = '#DC143C'><strong>不包含在计算机网络体系结构中</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310271435876.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="传输方式"><a href="#传输方式" class="headerlink" title="传输方式"></a>传输方式</h3><h4 id="串行传输和并行传输"><a href="#串行传输和并行传输" class="headerlink" title="串行传输和并行传输"></a>串行传输和并行传输</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290013451.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="同步传输"><a href="#同步传输" class="headerlink" title="同步传输"></a>同步传输</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290016144.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="异步传输"><a href="#异步传输" class="headerlink" title="异步传输"></a>异步传输</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290016451.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="单向通信、双向交替通信和双向同时通信"><a href="#单向通信、双向交替通信和双向同时通信" class="headerlink" title="单向通信、双向交替通信和双向同时通信"></a>单向通信、双向交替通信和双向同时通信</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290018537.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="编码与调制"><a href="#编码与调制" class="headerlink" title="编码与调制"></a>编码与调制</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310290025485.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="常用编码方式"><a href="#常用编码方式" class="headerlink" title="常用编码方式"></a>常用编码方式</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310292304577.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="基本的带通调制方法"><a href="#基本的带通调制方法" class="headerlink" title="基本的带通调制方法"></a>基本的带通调制方法</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310292309471.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="混合调制方法"><a href="#混合调制方法" class="headerlink" title="混合调制方法"></a>混合调制方法</h4><h5 id="正交振幅调制QAM-16"><a href="#正交振幅调制QAM-16" class="headerlink" title="正交振幅调制QAM-16"></a>正交振幅调制QAM-16</h5><ul>
<li>12种相位</li>
<li>每种相位有1或2种振幅可选</li>
<li>可以调制出16种码元（波形），每种码元可以对应表示4个比特</li>
<li>每个码元与4个比特的对应关系采用<font color = '#DC143C'><strong>格雷码</strong></font>，即任意两个相邻码元只有1个比特不同</li>
</ul>
<h3 id="信道的极限容量"><a href="#信道的极限容量" class="headerlink" title="信道的极限容量"></a>信道的极限容量</h3><h4 id="造成信号失真的主要因素"><a href="#造成信号失真的主要因素" class="headerlink" title="造成信号失真的主要因素"></a>造成信号失真的主要因素</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310301307192.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>信道上传输的<font color = '#DC143C'><strong>数字信号</strong></font>，可以看做是<font color = '#DC143C'><strong>多个频率的模拟信号进行多次叠加后形成的方波</strong></font></li>
<li>如果数字信号中的高频分量在传输时受到衰减甚至不能通过信道，则接收端收到的波形前沿和后沿就变得不那么陡峭，每一个码元所占的时间界限也不再明确。这样，在接收端收到的信号波形就失去了码元之间的清晰界限，这种现象称为<font color = '#DC143C'><strong>码间串扰</strong></font></li>
<li>如果<font color = '#DC143C'><strong>信道的频带越宽</strong></font>，则能够<font color = '#DC143C'><strong>通过的信号的高频分量就越多</strong></font>，那么<font color = '#DC143C'><strong>码元的传输速率就可以更高</strong></font>，而<font color = '#DC143C'><strong>不会导致码间串扰</strong></font></li>
<li>然而，<font color = '#DC143C'><strong>信道的频率带宽是有上限的</strong></font>，不可能无限大。因此，<font color = '#DC143C'><strong>码元的传输速率也有上限</strong></font></li>
</ul>
<h4 id="奈氏准则"><a href="#奈氏准则" class="headerlink" title="奈氏准则"></a>奈氏准则</h4><p><font color = '#DC143C'><strong>理想</strong></font>低通信道的<font color = '#DC143C'><strong>最高码元传输速率</strong></font> &#x3D; 2W Baud &#x3D; 2W 码元&#x2F;秒</p>
<blockquote>
<p>W：信道的频率带宽（单位为HZ）<br>Baud：波特，即码元&#x2F;秒</p>
</blockquote>
<ul>
<li><p>使用奈氏准则给出的公式，就可以根据信道的频率带宽，计算出信道的最高码元传输速率</p>
</li>
<li><p>只要码元传输速率不超过根据奈氏准则计算出的上限，就可以避免码间串扰</p>
</li>
<li><p>奈氏准则给出的是理想低通信道的最高码元传输速率，它和实际信道有较大的差别。因此，一个实际的信道所能传输的最高码元传输速率，要明显低于奈氏准则给出的上限值</p>
</li>
<li><p>码元传输速率又称为波特率、调制速率、波形速率或符号速率</p>
</li>
<li><p>波特率与比特率有一定的关系：</p>
<ul>
<li>当1个码元只携带1比特的信息量时，波特率（码元&#x2F;秒）与比特率（比特&#x2F;秒）在数值上是相等的</li>
<li>当1个码元携带n比特的信息量时，波特率（码元&#x2F;秒）转换成比特率（比特&#x2F;秒）时，数值要乘以n</li>
</ul>
</li>
</ul>
<h4 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h4><blockquote>
<p>尽管奈氏准则限制了最高码元传输速率，但是只要采用技术更为复杂的信号调制方法，让码元可以携带更多的比特，岂不是可以无限制地提高信息的传输效率吗？</p>
</blockquote>
<p>回答是否定的。因为在实际的信道中会有噪声，噪声是随机产生的，其瞬时值有时会很大，这会影响接收端对码元的识别，并且噪声功率相对于信号功率越大，影响就越大</p>
<h4 id="香农公式"><a href="#香农公式" class="headerlink" title="香农公式"></a>香农公式</h4><p><font color = '#DC143C'><strong>带宽受限</strong></font>且有<font color = '#DC143C'><strong>高斯白噪声</strong></font>干扰的信道的<font color = '#DC143C'><strong>极限信息传输速率</strong></font><br>$$<br>C &#x3D; W \log2(1 + \frac{S}{N})<br>$$</p>
<blockquote>
<p>C：信道的极限信息传输速率（单位为b&#x2F;s）</p>
<p>W：信道的频率带宽（单位为Hz）</p>
<p>S：信道内所传信号的平均功率</p>
<p>N：信道内地高斯噪声功率</p>
<p>S&#x2F;N：信噪比，常用分贝（dB）表示</p>
</blockquote>
<ul>
<li>信道的频率带宽W或信道中的信噪比S&#x2F;N越大，信道的极限信息传输速率C就越高</li>
<li>实际信道不可能无限制地提高频率带宽W或信道中的信噪比S&#x2F;N</li>
<li>实际信道中能够达到的信息传输速率，要比香农公式给出的极限传输速率低不少。这是因为在实际信道中，信号还要受到其他一些损伤，例如各种脉冲干扰和信号衰减等，这些因素在香农公式中并未考虑</li>
</ul>
<h3 id="信道复用技术"><a href="#信道复用技术" class="headerlink" title="信道复用技术"></a>信道复用技术</h3><h4 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h4><ul>
<li>复用（Multiplexing）就是<font color = '#DC143C'><strong>在一条传输媒体上同时传输多路用户的信号</strong></font></li>
<li>当一条传输媒体的传输容量大于多条信道传输的总容量时，就可以通过复用技术，在这条传输媒体上建立多条通信信道，以便<font color = '#DC143C'><strong>充分利用传输媒体的带宽</strong></font></li>
<li>尽管实现信道复用技术会增加通信成本（需要复用器、分用器以及费用较高的大容量共享信道），但如果<font color = '#DC143C'><strong>复用的信道数量较大</strong></font>，还是<font color = '#DC143C'><strong>比较划算</strong></font>的</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302059586.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="常见的信道复用技术"><a href="#常见的信道复用技术" class="headerlink" title="常见的信道复用技术"></a>常见的信道复用技术</h4><h5 id="频分复用FDM"><a href="#频分复用FDM" class="headerlink" title="频分复用FDM"></a>频分复用FDM</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103190.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="时分复用TDM"><a href="#时分复用TDM" class="headerlink" title="时分复用TDM"></a>时分复用TDM</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103106.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="波分复用WDM"><a href="#波分复用WDM" class="headerlink" title="波分复用WDM"></a>波分复用WDM</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302103689.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>根据频分复用的设计思想，可在一根光纤上<font color = '#DC143C'><strong>同时传输多个频率（波长）相近的光载波信号</strong></font>，实现基于光纤的频分复用技术</li>
<li>目前可以在一根光纤上复用80路或更多路的光载波信号。因此，这种复用技术也称为<font color = '#DC143C'><strong>密集波分复用DWDM</strong></font></li>
<li>铺设光缆的工程耗资巨大，应尽量在一根光缆中放入尽可能多的光纤，然后对每一根光纤使用密集波分复用技术</li>
</ul>
<h5 id="码分复用CDM"><a href="#码分复用CDM" class="headerlink" title="码分复用CDM"></a>码分复用CDM</h5><ul>
<li><p>码分复用（Code Division Multiplexing，CDM）常称为码分多址（Code Division Mutiple Access，CDMA），它是在扩频通信技术的基础上发展起来的一种无线通信技术</p>
</li>
<li><p>与FDM和TDM不同，CDMA的每个用户可以<font color = '#DC143C'><strong>在相同的时间使用相同的频带进行通信</strong></font></p>
</li>
<li><p>CDMA最初用于军事通信，这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现</p>
</li>
<li><p>随着技术的进步，CDMA设备的价格和体积都大幅下降，因而现在已广泛用于民用的移动通信中</p>
</li>
<li><p>CDMA将每个比特时间划分为m个更短的时间片，称为<font color = '#DC143C'><strong>码片</strong></font>（Chip）。m的取值通常为64或128</p>
</li>
<li><p>CDMA的每个站点都被指派一个唯一的<font color = '#DC143C'><strong>m比特码片序列</strong></font>（Chip Sequence）</p>
<ul>
<li>某个站要发送<font color = '#DC143C'><strong>比特1</strong></font>，则发送它自己的<font color = '#DC143C'><strong>m比特码片序列</strong></font></li>
<li>某个站要发送<font color = '#DC143C'><strong>比特0</strong></font>，则发送它自己的<font color = '#DC143C'><strong>m比特码片序列的反码</strong></font></li>
</ul>
</li>
<li><p>如果有两个或多个站同时发送数据，则信道中的信号就是这些站各自所发送一系列码片序列或码片序列反码的<font color = '#DC143C'><strong>叠加</strong></font>。为了从信道中<font color = '#DC143C'><strong>分离</strong></font>出每个站的信号，给每个站<font color = '#DC143C'><strong>指派码片序列</strong></font>时，必须遵守：</p>
<ul>
<li>分配给每个站的<font color = '#DC143C'><strong>码片序列必须各不相同</strong></font>，实际常采用伪随机码序列</li>
<li>分配给每个站的<font color = '#DC143C'><strong>码片序列必须相互正交</strong></font>，即各码片序列相应的码片向量之间的<font color = '#DC143C'><strong>规格化内积为0</strong></font></li>
</ul>
<p>$$<br>A·B &#x3D; \frac{1}{m}\sum_{i&#x3D;1}^{m}{A_iB_i} &#x3D; 0<br>$$</p>
</li>
</ul>
<h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><h4 id="数据链路层在网络体系结构中所处的地位"><a href="#数据链路层在网络体系结构中所处的地位" class="headerlink" title="数据链路层在网络体系结构中所处的地位"></a>数据链路层在网络体系结构中所处的地位</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302129516.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="链路、数据链路和帧"><a href="#链路、数据链路和帧" class="headerlink" title="链路、数据链路和帧"></a>链路、数据链路和帧</h4><ul>
<li>链路（Link）是指从一个节点到相邻节点的一段物理线路（有线或无线），而<font color = '#DC143C'><strong>中间没有任何其他的交换节点</strong></font></li>
<li>数据链路（Data Link）是基于链路的。当在一条链路上传送数据时，除需要链路本身，还需要一些必要的通信协议来控制这些数据的传输，把<font color = '#DC143C'><strong>实现这些协议的硬件和软件加到链路上</strong></font>，就构成了数据链路</li>
<li>计算机中的网络适配器（俗称<font color = '#DC143C'><strong>网卡</strong></font>）和其对应的<font color = '#DC143C'><strong>软件驱动程序</strong></font>就实现了这些协议。<font color = '#DC143C'><strong>一般的网络适配器都包含了物理层和数据链路层这两层的功能</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302135783.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>帧（Frame）是<font color = '#DC143C'><strong>数据链路层</strong></font>对等实体之间在水平方向进行逻辑通信的<font color = '#DC143C'><strong>协议数据单元PDU</strong></font></li>
</ul>
<h3 id="三个问题"><a href="#三个问题" class="headerlink" title="三个问题"></a>三个问题</h3><h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><ul>
<li>封装成帧是指数据链路层给上层交付下来的协议数据单元PDU添加一个首部和一个尾部，使之成为帧<ul>
<li>帧的首部和尾部中包含一些<font color = '#DC143C'><strong>重要的控制信息</strong></font></li>
<li>帧首部和尾部的作用之一就是<font color = '#DC143C'><strong>帧定界</strong></font></li>
</ul>
</li>
<li>为了提高数据链路层传输帧的效率，应当使<font color = '#DC143C'><strong>帧的数据载荷的长度尽可能地大于首部和尾部的长度</strong></font></li>
<li>考虑到对缓存空间的需求以及差错控制等诸多因素，每一种数据链路层协议都规定了帧的数据载荷的长度上限，即<font color = '#DC143C'><strong>最大传送单元</strong></font>（Maximum Transfer Unit，MTU）。例如，以太网的MTU为1500个字节</li>
</ul>
<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><ul>
<li>透明传输是指<font color = '#DC143C'><strong>数据链路层对上层交付下来的协议数据单元PDU没有任何限制</strong></font>，就好像数据链路层不存在一样<ul>
<li>面向字节的物理链路使用<font color = '#DC143C'><strong>字节填充</strong></font>的方法实现透明传输</li>
<li>面向比特的物理链路使用<font color = '#DC143C'><strong>比特填充</strong></font>的方法实现透明传输</li>
</ul>
</li>
</ul>
<h4 id="差错检测"><a href="#差错检测" class="headerlink" title="差错检测"></a>差错检测</h4><h5 id="误码的相关概念"><a href="#误码的相关概念" class="headerlink" title="误码的相关概念"></a>误码的相关概念</h5><ul>
<li><p>实际的通信链路都是不理想的，比特在传输过程中可能会产生差错（称为<font color = '#DC143C'><strong>比特差错</strong></font>）</p>
<ul>
<li>比特1可能变成比特0</li>
<li>比特0可能变成比特1</li>
</ul>
</li>
<li><p>在一段时间内，传输错误的比特数量占所传输比特总数的比率称为<font color = '#DC143C'><strong>误码率</strong></font>（Bit Error Rate，BER）</p>
</li>
<li><p><font color = '#DC143C'><strong>提高链路的信噪比</strong></font>，可以<font color = '#DC143C'><strong>降低误码率</strong></font>。但在实际的通信链路上，不可能使误码率下降为零</p>
</li>
<li><p>使用<font color = '#DC143C'><strong>差错检测技术</strong></font>来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一</p>
</li>
</ul>
<h5 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h5><ul>
<li>奇校验是在待发送的数据后面<font color = '#DC143C'><strong>添加1个校验位</strong></font>，使得添加该校验位后的整个数据中<font color = '#DC143C'><strong>比特1的个数</strong></font>为<font color = '#DC143C'><strong>奇数</strong></font></li>
<li>偶校验是在待发送的数据后面<font color = '#DC143C'><strong>添加1个校验位</strong></font>，使得添加该校验位后的整个数据中<font color = '#DC143C'><strong>比特1的个数</strong></font>为<font color = '#DC143C'><strong>偶数</strong></font></li>
<li>在所传输的数据中，如果有<font color = '#DC143C'><strong>奇数个位发生误码</strong></font>，则所包含比特1的数量的奇偶性会发生改变，<font color = '#DC143C'><strong>可以检测出误码</strong></font></li>
<li>在所传输的数据中，如果有<font color = '#DC143C'><strong>偶数个位发生误码</strong></font>，则所包含比特1的数量的奇偶性不会发生改变，<font color = '#DC143C'><strong>无法检测出误码</strong></font></li>
<li>在实际使用时，奇偶校验又可分为垂直奇偶校验、水平奇偶校验以及水平垂直奇偶校验</li>
</ul>
<h5 id="循环冗余校验"><a href="#循环冗余校验" class="headerlink" title="循环冗余校验"></a>循环冗余校验</h5><ul>
<li>数据链路层广泛使用<font color = '#DC143C'><strong>漏检率极低</strong></font>的循环冗余校验（Cyclic Redundancy Check，CRC）检错技术</li>
<li>循环冗余校验CRC的基本思想<ul>
<li>收发双方约定好一个<font color = '#DC143C'><strong>生成多项式G(x)</strong></font></li>
<li>发送方基于待发送的数据和生成多项式G(x)，计算出差错检测码（<font color = '#DC143C'><strong>冗余码</strong></font>），将冗余码添加到待发送数据的后面一起传输</li>
<li>接收方受到数据和冗余码后，通过生成多项式G(x)来计算收到的数据和冗余码是否产生了误码</li>
</ul>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302229145.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li>奇偶校验、循环冗余校验等差错检测技术，只能检测出传输过程中出现了差错，但并<font color = '#DC143C'><strong>不能定位错误</strong></font>，因此<font color = '#DC143C'><strong>无法纠正错误</strong></font></li>
<li>要想纠正传输中的差错，可以使用冗余信息更多的<font color = '#DC143C'><strong>纠错码</strong></font>（例如海明码）进行<font color = '#DC143C'><strong>前向纠错</strong></font>。但纠错码的开销比较大，在<font color = '#DC143C'><strong>计算机网络中较少使用</strong></font></li>
<li>在计算机网络中，通常采用<font color = '#DC143C'><strong>检错重传方式来纠正传输中的差错</strong></font>，<font color = '#DC143C'><strong>或者仅仅丢弃检测到差错的帧</strong></font>，这取决于数据链路层想起上层提供的是可靠传输服务还是不可靠传输服务</li>
<li>循环冗余校验CRC具有很好的检错能力（<font color = '#DC143C'><strong>漏检率极低</strong></font>），虽然计算比较复杂，但非常<font color = '#DC143C'><strong>易于用硬件实现</strong></font>，因此被广泛应用于数据链路层</li>
</ul>
<h3 id="可靠传输"><a href="#可靠传输" class="headerlink" title="可靠传输"></a>可靠传输</h3><h4 id="基本概念-1"><a href="#基本概念-1" class="headerlink" title="基本概念"></a>基本概念</h4><ul>
<li>使用<font color = '#DC143C'><strong>差错检测技术</strong></font>（例如循环冗余校验CRC），接收方的数据链路层就可检测出帧在传输过程中是否产生了<font color = '#DC143C'><strong>误码</strong></font>（比特差错）</li>
<li>数据链路层向其上层提供的服务类型<ul>
<li><font color = '#DC143C'><strong>不可靠传输服务</strong></font>：<font color = '#DC143C'><strong>仅仅丢弃有误码的帧</strong></font>，其他什么也不做</li>
<li><font color = '#DC143C'><strong>可靠传输服务</strong></font>：通过某种机制实现<font color = '#DC143C'><strong>发送方发送什么</strong></font>，<font color = '#DC143C'><strong>接收方最终就能收到什么</strong></font></li>
</ul>
</li>
<li>一般情况下，<font color = '#DC143C'><strong>有线链路的误码率比较低</strong></font>。为了减小开销，<font color = '#DC143C'><strong>并不要求数据链路层向其上层提供可靠传输服务</strong></font>。即使出现了误码，可靠传输的问题由其上层处理</li>
<li><font color = '#DC143C'><strong>无线链路</strong></font>易受干扰，<font color = '#DC143C'><strong>误码率比较高</strong></font>，因此<font color = '#DC143C'><strong>要求数据链路层必须向其上层提供可靠传输服务</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202310302246888.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><font color = '#DC143C'><strong>可靠传输服务并不局限于数据链路层</strong></font>，其他各层均可选择实现可靠传输</li>
<li>可靠传输的实现比较复杂，开销比较大，是否使用可靠传输取决于应用需求</li>
</ul>
<h4 id="停止-等待协议"><a href="#停止-等待协议" class="headerlink" title="停止-等待协议"></a>停止-等待协议</h4><h5 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022338331.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>接收方收不到数据分组，就不会发送相应的ACK或NAK</li>
<li>如果不采取措施，发送方就会一致处于等待接收方ACK或NAK的状态</li>
<li>为解决上述问题，发送方可在每发送完一个数据分组时就启动一个<font color = '#DC143C'><strong>超时计时器</strong></font>（Timeout Timer）</li>
<li>若到了超时计时器所设置的<font color = '#DC143C'><strong>超时计重传时间</strong></font>（Retranmission Time-Out，RTO），但发送方仍未收到接收方的ACK或NAK，就<font color = '#DC143C'><strong>重传</strong></font>之前已发送过的数据分组</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022343344.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>为了<font color = '#DC143C'><strong>避免分组重复</strong></font>这种传输错误，必须<font color = '#DC143C'><strong>给每个分组带上序号</strong></font></li>
<li>对于停止-等待协议，由于每发送一个数据分组就停止等待，只要保证每发送一个新的数据分组，其序号与上次发送的数据分组的序号不同就可以，因此<font color = '#DC143C'><strong>用一个比特来编号就够了，序号有0和1这两个</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022351562.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311022351906.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>注意</p>
</blockquote>
<ul>
<li>使用超时重传机制后，就可以不使用否认机制了，这样可使协议实现起来更加简单。但是，如果点对点链路的误码率较高，<font color = '#DC143C'><strong>使用否认机制可以使发送方在超时计时器超时前就尽快重传</strong></font></li>
<li>为了让接收方能够判断所收到的数据分组是否是重复的，需要给<font color = '#DC143C'><strong>数据分组编号</strong></font>。由于<font color = '#DC143C'><strong>停止-等待协议</strong></font>的特性，<font color = '#DC143C'><strong>只需1个比特编序号</strong></font>即可，即序号0和序号1</li>
<li>为了让发送方能够判断所收到的确认分组是否是重复的，需要给<font color = '#DC143C'><strong>确认分组编号</strong></font>，所用比特数量<font color = '#DC143C'><strong>与数据分组所用比特数量一样</strong></font><ul>
<li>数据链路层一般不会出现确认分组迟到的情况，因此在<font color = '#DC143C'><strong>数据链路层实现停止-等待协议可以不用给确认分组编号</strong></font></li>
</ul>
</li>
<li>给超时计时器设置的超时重传时间RTO应当仔细选择，<font color = '#DC143C'><strong>一般将RTO设置为略大于收发双方的平均往返时间RTT</strong></font><ul>
<li>在数据链路层，点对点的往返时间RTT比较固定，RTO就比较好设定</li>
<li>在运输层，由于端到端往返时间非常不确定，设置合适的超时重传时间RTO有时并不容易</li>
</ul>
</li>
<li>停止等待协议属于自动请求重传（Automatic Repeat Request，ARQ）协议。即重传的请求是发送方自动进行的，而不是接收方请求发送方重传某个误码的数据分组</li>
</ul>
<h5 id="信道利用率"><a href="#信道利用率" class="headerlink" title="信道利用率"></a>信道利用率</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030005371.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>若出现超时重传，对于传送有用的数据信息来说，信道利用率还要降低</li>
<li>在往返时间RTT相对较大的情况下，为了提高信道利用率，收发双方不适合采用停止-等待协议，而可以选择使用回退N帧（GBN）协议或选择重传（SR）协议</li>
</ul>
<h4 id="回退N帧协议"><a href="#回退N帧协议" class="headerlink" title="回退N帧协议"></a>回退N帧协议</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030011796.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="发送方"><a href="#发送方" class="headerlink" title="发送方"></a>发送方</h5><ul>
<li>发送窗口W_T的取值范围是1 &lt; W_T &lt;&#x3D; (2^n -1)，其中，n是构成分组序号的比特数量<ul>
<li>如果W_T &#x3D; 1             变成了停止-等待协议</li>
<li>如果W_T &gt; (2^n -1)  接收方<font color = '#DC143C'><strong>无法分辨新旧数据分组</strong></font></li>
</ul>
</li>
<li>可在未收到的接收方确认分组的情况下，将序号落入发送窗口内的多个数据分组全部发送出去</li>
<li>只有收到对已发送数据分组的确认分组时，发送窗口才能向前滑动到相应位置</li>
<li>收到多个重复确认时，可在重传计时器超时前尽早开始重传，由具体实现决定</li>
<li>发送窗口内某个已发送的数据分组产生超时重传时，发送窗口内该数据分组的后续已发送的数据分组也必须全部重传，这就是回退N帧（Go-back-N，GBN）协议名称的由来</li>
</ul>
<h5 id="接收方"><a href="#接收方" class="headerlink" title="接收方"></a>接收方</h5><ul>
<li>接收窗口W_R &#x3D; 1的，因此只能按序接收数据分组</li>
<li>只接收序号落入接收窗口内且无误码的数据分组，并且将接收窗口向前滑动一个位置，与此同时给发送方发送相应的确认分组</li>
<li>为了减小开销，接收方不必每收到一个按序到达且无误码的数据分组就给发送方发送一个相应的确认分组<ul>
<li>可以在连续收到多个按序到达且无误码的数据分组后（数量由具体实现决定），才针对最后一个数据分组发送确认分组，这称为<font color = '#DC143C'><strong>累计确认</strong></font></li>
<li>或者可以在自己有数据分组要发送时才对之前按序接收且无误码的数据分组进行稍待确认</li>
</ul>
</li>
<li>接收方收到未按序到达的数据分组后，除丢弃外，还可对之前最后一个按序到达的数据分组进行重复确认，以便发送方尽快重传</li>
</ul>
<h4 id="选择重传协议"><a href="#选择重传协议" class="headerlink" title="选择重传协议"></a>选择重传协议</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311030054409.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="发送方-1"><a href="#发送方-1" class="headerlink" title="发送方"></a>发送方</h5><ul>
<li>可在未收到接收方确认分组的情况下，将序号落入发送窗口内的多个数据分组全部发送出去</li>
<li>只有按序收到对已发送数据分组的确认分组时，发送窗口才能向前滑动到相应位置</li>
<li>如果收到未按序到达的确认分组，应对其进行记录，以防止其相应数据分组的超时重发，但发送窗口不能向前滑动</li>
</ul>
<h5 id="接收方-1"><a href="#接收方-1" class="headerlink" title="接收方"></a>接收方</h5><ul>
<li>可接收未按序到达但没有误码并且序号落入接收窗口内的数据分组</li>
<li>为了使发送方仅重传出现差错的分组，接收方不再采用累积确认，而需要对每一个正确接收到的数据分组进行逐一确认</li>
<li>只有在按序接收数据分组后，接收窗口才能向前滑动到相应位置</li>
</ul>
<h3 id="点对点协议PPP"><a href="#点对点协议PPP" class="headerlink" title="点对点协议PPP"></a>点对点协议PPP</h3><h4 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h4><ul>
<li>点对点协议（Point-to-point Protocol，PPP）是目前使用最广泛的点对点数据链路层协议</li>
<li>点对点协议PPP是因特网工程任务组（Internet Engineering Task Force，IETF）于1992年制定的。经过多次修订，目前PPP已成为因特网的正式标准[RFC1661，RFC1662]</li>
<li>点对点协议PPP主要有两种应用</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031055022.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>从网络体系结构的角度看点对点协议PPP的组成</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031112666.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="PPP的帧格式"><a href="#PPP的帧格式" class="headerlink" title="PPP的帧格式"></a>PPP的帧格式</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031113524.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="PPP帧的透明传输"><a href="#PPP帧的透明传输" class="headerlink" title="PPP帧的透明传输"></a>PPP帧的透明传输</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031116801.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031117632.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="PPP帧的差错检测"><a href="#PPP帧的差错检测" class="headerlink" title="PPP帧的差错检测"></a>PPP帧的差错检测</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031118300.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>接收方每收到一个PPP帧，就进行CRC检验。若CRC检验正确，就收下这个帧；否则，就丢弃这个帧</li>
<li>使用PPP的数据链路层，<font color = '#DC143C'><strong>向上提供的是不可靠数据传输服务</strong></font></li>
</ul>
<h4 id="PPP的工作状态"><a href="#PPP的工作状态" class="headerlink" title="PPP的工作状态"></a>PPP的工作状态</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031122721.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="共享式以太网"><a href="#共享式以太网" class="headerlink" title="共享式以太网"></a>共享式以太网</h3><ul>
<li>以太网（Ethernet）以曾经被假想的电磁波传输介质<font color = '#DC143C'><strong>以太</strong></font>（Ether）来命名</li>
<li>以太网最初采用无源电缆（不包含电源线）作为共享总线来传输帧，属于基带总线局域网，传输速率为2.94Mb&#x2F;s</li>
<li>以太网目前已经从传统的<font color = '#DC143C'><strong>共享式以太网</strong></font>发展到<font color = '#DC143C'><strong>交换式以太网</strong></font>，传输速率已经从10Mb&#x2F;s提高到100Mb&#x2F;s、1Gb&#x2F;s甚至10Gb&#x2F;s</li>
</ul>
<h3 id="网络适配器和MAC地址"><a href="#网络适配器和MAC地址" class="headerlink" title="网络适配器和MAC地址"></a>网络适配器和MAC地址</h3><h4 id="网络适配器"><a href="#网络适配器" class="headerlink" title="网络适配器"></a>网络适配器</h4><ul>
<li>要将计算机连接到以太网，需要使用相应的<font color = '#DC143C'><strong>网络适配器</strong></font>（Adapter），网络适配器一般简称为 “<font color = '#DC143C'><strong>网卡</strong></font>“</li>
<li>在计算机内部，<font color = '#DC143C'><strong>网卡与CPU</strong></font>之间的通信，一般都是通过计算机主板上的I&#x2F;O总线以<font color = '#DC143C'><strong>并行传输</strong></font>方式进行</li>
<li><font color = '#DC143C'><strong>网卡与外部以太网</strong></font>（局域网）之间的通信，一般都是通过传输媒体（同轴电缆、双绞线电缆、光纤）以<font color = '#DC143C'><strong>串行方式</strong></font>进行的</li>
<li>网卡除要<font color = '#DC143C'><strong>实现物理层和数据链路层功能</strong></font>，其另外一个重要功能就是要进行<font color = '#DC143C'><strong>并行传输和串行传输</strong></font>的转换。由于网络的传输速率和计算机内部总线上的传输速率并不相同，因此在网卡的核心芯片中都会包含用于缓存数据的存储器</li>
<li>在确保网卡硬件正确的情况下，为了使网卡正常工作，还必须要在计算机的操作系统中为网卡安装相应的设备驱动程序。<font color = '#DC143C'><strong>驱动程序</strong></font>负责驱动网卡发送和接收帧</li>
</ul>
<h4 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h4><ul>
<li>当多个主机连接在同一个广播信道上，要想实现两个主机之间的通信，则每个主机都必须要有一个<font color = '#DC143C'><strong>唯一的标识</strong></font>，即一个<font color = '#DC143C'><strong>数据链路层地址</strong></font></li>
<li>在每个主机发送的<font color = '#DC143C'><strong>帧的首部</strong></font>中，都<font color = '#DC143C'><strong>携带</strong></font>有发送主机（源主机）和接收主机（目的主机）的<font color = '#DC143C'><strong>数据链路层地址</strong></font>。由于这类地址是用于<font color = '#DC143C'><strong>媒体接入控制</strong></font>（Medium Access Control，MAC）的，因此被称为<font color = '#DC143C'><strong>MAC</strong></font>地址</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031723083.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p><font color = '#DC143C'><strong>MAC地址</strong></font>一般被固化在网卡的电可擦可编程只读存储器EEPROM中，因此MAC地址也被称为<font color = '#DC143C'><strong>硬件地址</strong></font></p>
</li>
<li><p>MAC地址有时也被称为<font color = '#DC143C'><strong>物理地址</strong></font></p>
</li>
<li><p><font color = '#DC143C'><strong>物理地址</strong></font>属于数据链路层范畴</p>
</li>
<li><p>一般情况下，普通用户计算机中往往会包含两块网卡</p>
<ul>
<li>一块是用于接入有限局域网的<font color = '#DC143C'><strong>以太网卡</strong></font></li>
<li>另一块是用于接入无线局域网的<font color = '#DC143C'><strong>Wi-Fi网卡</strong></font></li>
</ul>
</li>
<li><p>每块网卡都有一个<font color = '#DC143C'><strong>全球唯一的MAC地址</strong></font></p>
</li>
<li><p>交换机和路由器往往具有更多的网络接口，所以会拥有更多的MAC地址</p>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031732120.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031735560.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031737470.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="广播MAC地址举例"><a href="#广播MAC地址举例" class="headerlink" title="广播MAC地址举例"></a>广播MAC地址举例</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031739554.png" srcset="/img/loading.gif" lazyload></p>
<h5 id="多播MAC地址举例"><a href="#多播MAC地址举例" class="headerlink" title="多播MAC地址举例"></a>多播MAC地址举例</h5><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031740472.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><ul>
<li><p>网卡从网络上每收到一个无误码的帧，就检查帧首部中的目的MAC地址，按以下情况处理</p>
<p>(1) 如果目的MAC地址是广播地址（FF-FF-FF-FF-FF-FF），则接受该帧</p>
<p>(2) 如果目的MAC地址与网卡上固化的全球单播MAC地址相同，则接受该帧</p>
<p>(3) 如果目的MAC地址是网卡支持的多播地址，则接受该帧</p>
<p>(4) 除上述（1）、（2）和（3）情况外，丢弃该帧</p>
</li>
<li><p>网卡还可被设置为一种特殊的工作方式：<font color = '#DC143C'><strong>混杂方式</strong></font>（Promiscuous Mode）。工作在混杂方式的网卡，只要收到共享媒体上传来的帧就会收下，而不管帧的目的MAC地址是什么</p>
<ul>
<li>对于网络维护和管理人员，这种方式可以监视和分析局域网上的流量，以便找出提高网络性能的具体措施</li>
<li><font color = '#DC143C'><strong>嗅探器</strong></font>（Sniffer）就是一种工作在混杂方式的网卡，再配合相应的工具软件（WireShark），就可以作为一种非常有用的网络工具来学习和分析网络</li>
<li>混杂方式就像一把 “双刃剑”，黑客常利用这种方式非法获取网络用户的口令</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意</p>
</blockquote>
<ul>
<li>全球单播MAC地址就如同身份证上的身份号码，具有唯一性，它往往与用户个人信息绑定在一起。因此，用户应尽量<font color = '#DC143C'><strong>确保自己拥有的全球单播MAC地址不被泄露</strong></font></li>
<li>为了避免用户设备连接Wi-Fi热点时MAC地址泄露的安全问题，目前大多数移动设备都已采用了<font color = '#DC143C'><strong>随机MAC地址技术</strong></font></li>
</ul>
<h3 id="CSMA-CD协议"><a href="#CSMA-CD协议" class="headerlink" title="CSMA&#x2F;CD协议"></a>CSMA&#x2F;CD协议</h3><h4 id="基本原理-1"><a href="#基本原理-1" class="headerlink" title="基本原理"></a>基本原理</h4><ul>
<li>在以太网的发展初期，人们普遍认为 “无源的电缆线比有源器件可靠”，因此将多个站点连接在一条总线上来构建<font color = '#DC143C'><strong>共享总线以太网</strong></font></li>
<li>共享总线以太网具有<font color = '#DC143C'><strong>天然的广播特性</strong></font>，即使总线上某个站点给另一个站点发送单播帧，表示帧的信号也会沿着总线传播到总线上的其他各站点</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031804364.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>当某个站点在总线上发送帧时，总线资源会被该站点独占。此时，如果总线上的其他站点也要在总线上发送帧，就会产生<font color = '#DC143C'><strong>信号碰撞</strong></font></li>
<li>当两个或多个站点同时使用总线发送帧时，就会产生信号碰撞</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031807591.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>为了解决各站点争用总线的问题，共享总线以太网使用了一种专用协议<font color = '#DC143C'><strong>CSMA&#x2F;CD</strong></font>，它是<font color = '#DC143C'><strong>载波监听多址接入&#x2F;碰撞检测</strong></font>（Carrier Sense Multiple Access Collision Detection）的英文缩写词</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311031819664.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>多址接入MA</p>
<p>载波监听CS</p>
<p>碰撞检测CD</p>
</blockquote>
<ul>
<li>载波监听检测到总线空闲，但<font color = '#DC143C'><strong>总线并不一定空闲</strong></font></li>
<li>使用CSMA&#x2F;CD协议的共享总线以太网上的各站点，只是尽量避免碰撞并在出现碰撞时做出退避后重发的处理，但<font color = '#DC143C'><strong>不能完全避免碰撞</strong></font></li>
<li>在使用CSMA&#x2F;CD协议时，由于正在发送帧的站点必须 “边发送帧边检测碰撞”，因此站点不可能同时进行发送和接收，也就是不可能进行全双工通信，而<font color = '#DC143C'><strong>只能进行半双工通信</strong></font>（双向交替通信）</li>
</ul>
<h3 id="共享式以太网-1"><a href="#共享式以太网-1" class="headerlink" title="共享式以太网"></a>共享式以太网</h3><h4 id="争用期"><a href="#争用期" class="headerlink" title="争用期"></a>争用期</h4><ul>
<li>使用CSMA&#x2F;CD协议的共享总线以太网上的任意站点在发送帧的过程中都可能会遭遇碰撞</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032309952.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>站点从发送帧开始，最多经过时长2τ（即δ -&gt; 0）就可以检测出所发送的帧是否遭遇了碰撞</li>
<li>因此，共享总线以太网的<font color = '#DC143C'><strong>端到端往返时间2τ</strong></font>被称为<font color = '#DC143C'><strong>争用期</strong></font>（Contension Period）或<font color = '#DC143C'><strong>碰撞窗口</strong></font>（Collision Window），它是一个非常重要的参数<ul>
<li>站点从发送帧开始，<font color = '#DC143C'><strong>经过争用期2τ这段时间还没有检测到碰撞</strong></font>，<font color = '#DC143C'><strong>就可以肯定这次发送不会产生碰撞</strong></font></li>
</ul>
</li>
<li>从争用期的概念可以看出，共享总线以太网上的每一个站点从发送帧开始，到之后的一小段时间内，都有可能遭遇碰撞，而<font color = '#DC143C'><strong>这一小段的长短时不确定</strong></font>的，它<font color = '#DC143C'><strong>取决于另一个发送帧的站点与本站点的距离</strong></font>，但不会超过总线的端到端往返传播时延，即一个争用期2τ<ul>
<li>很显然，总线的长度越长（单程端到端传播时延越大），网络中站点数量越多，发生碰撞的概率就越大</li>
<li>因此，共享以太网的总线长度不能太长，接入的站点数量也不能太多</li>
</ul>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032321651.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="最小帧长"><a href="#最小帧长" class="headerlink" title="最小帧长"></a>最小帧长</h4><ul>
<li>为了确保共享总线以太网上的每一个站点在发送完一个完整的帧之前，能够检测出是否产生了碰撞，<font color = '#DC143C'><strong>帧的发送时延就不能少于共享总线以太网端到端的往返时间</strong></font>，即一个争用期2τ</li>
<li>对于10Mb&#x2F;s的共享总线以太网，其争用期2的值规定为51.2μs，因此其<font color = '#DC143C'><strong>最小帧长为512b，即64B</strong></font></li>
</ul>
<p>$$<br>10Mb&#x2F;s \times 51.2μs &#x3D; 512b &#x3D; 64B<br>$$</p>
<ul>
<li>当某个站点在发送帧时，如果帧的前64B没有遭遇碰撞，那么帧的后续部分也就不会遭遇碰撞。也就是说，如果遭遇碰撞，就一定时在帧的前64B之内</li>
<li>由于发送帧的站点边发送帧边检测碰撞，一旦检测到碰撞就立即中止帧的发送，此时已发送的数据量一定小于64B。因此，接收站点收到<font color = '#DC143C'><strong>长度小于64B的帧</strong></font>，就可判定这是一个<font color = '#DC143C'><strong>遭遇了碰撞而异常中止的无效帧</strong></font>，将其丢弃即可</li>
</ul>
<h4 id="最大帧长"><a href="#最大帧长" class="headerlink" title="最大帧长"></a>最大帧长</h4><ul>
<li>一般来说，<font color = '#DC143C'><strong>帧的数据载荷的长度应远大于帧首部和尾部的总长度</strong></font>，这样可以<font color = '#DC143C'><strong>提高帧的传输效率</strong></font></li>
<li>然而，如果不限制数据载荷的长度上限，就可能使得<font color = '#DC143C'><strong>帧的长度太长</strong></font>，这会<font color = '#DC143C'><strong>带来一些问题</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032346999.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="退避算法"><a href="#退避算法" class="headerlink" title="退避算法"></a>退避算法</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032349618.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>如果连续多次发生碰撞，就表明可能有较多的站点参与竞争信道。但使用上述退避算法可<font color = '#DC143C'><strong>使重传需要推迟的平均时间随重传次数而增大</strong></font>（即<font color = '#DC143C'><strong>动态退避</strong></font>），因而<font color = '#DC143C'><strong>减小产生碰撞的概率</strong></font></li>
<li><font color = '#DC143C'><strong>当重传达16次仍不能成功时</strong></font>，就表明同时打算发送帧的站点太多了，以至于连续产生碰撞，此时应<font color = '#DC143C'><strong>放弃重传</strong></font>并向高层报告</li>
</ul>
<h4 id="信道利用率-1"><a href="#信道利用率-1" class="headerlink" title="信道利用率"></a>信道利用率</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311032354037.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>考虑以下理想情况<ul>
<li>总线一旦空闲就有某个站点立即发送帧</li>
<li>各站点发送帧都不会产生碰撞</li>
<li>发送一帧占用总线的时间为T0 + τ，而帧本身的发送时间时T0</li>
</ul>
</li>
</ul>
<p>$$<br>极限信道利用率\ S_{max} &#x3D; \frac{T_0}{T_0 + \tau} &#x3D; \frac{1}{1 + \frac{\tau}{T_0}} &#x3D; \frac{1}{1+a}<br>$$</p>
<h3 id="使用集线器的共享式以太网"><a href="#使用集线器的共享式以太网" class="headerlink" title="使用集线器的共享式以太网"></a>使用集线器的共享式以太网</h3><ul>
<li>早期的传统以太网是使用<font color = '#DC143C'><strong>粗同轴电缆</strong></font>的共享<font color = '#DC143C'><strong>总线</strong></font>以太网，后来发展到使用价格相对便宜的<font color = '#DC143C'><strong>细同轴电缆</strong></font></li>
<li>当初认为这种连接方法既简单又可靠，因为在那个时代普遍认为<font color = '#DC143C'><strong>有源器件不可靠</strong></font>，而<font color = '#DC143C'><strong>无源的电缆线才是最可靠的</strong></font><ul>
<li>然而，实践证明这种使用<font color = '#DC143C'><strong>无源电缆线和大量机械接口</strong></font>的总线型以太网<font color = '#DC143C'><strong>并不</strong></font>像人们想象的那么<font color = '#DC143C'><strong>可靠</strong></font></li>
</ul>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311040009777.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p>在使用细同轴电缆的共享总线以太网之后，以太网发展出来了一种使用大规模集成电路来替代总线、并且可靠性非常高的设备，叫作<font color = '#DC143C'><strong>集线器（Hub）</strong></font></p>
</li>
<li><p>站点连接到集线器的传输媒体也转而使用更便宜、更灵活的<font color = '#DC143C'><strong>双绞线电缆</strong></font></p>
</li>
<li><p>集线器的一些主要特点如下</p>
<ul>
<li>使用集线器的以太网虽然<font color = '#DC143C'><strong>物理拓扑是星型</strong></font>的，但在逻辑上仍然是一个<font color = '#DC143C'><strong>总线网</strong></font>。总线上的各站点共享总线资源，<font color = '#DC143C'><strong>使用的还是CSMA&#x2F;CD协议</strong></font></li>
<li>集线器<font color = '#DC143C'><strong>只工作在物理层</strong></font>，它的每个接口仅简单地转发比特，并不进行碰撞检测。碰撞检测的xingxin任务由各站点中的网卡负责</li>
<li>集线器一般都<font color = '#DC143C'><strong>有少量的容错能力和网络管理功能</strong></font>。例如，若网络中某个站点的网卡出现了故障而不停地发送帧，集线器可以检测到这个问题，在内部断开与出故障网卡的连线，使整个以太网能正常工作</li>
</ul>
</li>
<li><p>IEEE于1990年制定了<font color = '#DC143C'><strong>10BASE-T</strong></font>星型以太网的标准802.3i，这种以太网是局域网发展史上的一座非常重要的里程碑，它为<font color = '#DC143C'><strong>以太网在局域网中的统治地位</strong></font>奠定了牢固的基础</p>
</li>
<li><p>10BASE-T以太网的通信距离较短，每个<font color = '#DC143C'><strong>站点到集线器的距离不能超过100m</strong></font></p>
</li>
<li><p>IEEE 802.3以太网还可使用光纤作为传输媒体，相应的标准为10BASE-F，“F”表示光纤。光纤主要用作集线器之间的远程连接</p>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311040020983.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="在物理层扩展以太网"><a href="#在物理层扩展以太网" class="headerlink" title="在物理层扩展以太网"></a>在物理层扩展以太网</h3><h4 id="扩展站点与集线器之间的距离"><a href="#扩展站点与集线器之间的距离" class="headerlink" title="扩展站点与集线器之间的距离"></a>扩展站点与集线器之间的距离</h4><ul>
<li>共享总线以太网中两站点之间的<font color = '#DC143C'><strong>距离不能太远</strong></font>，否则它们之间所传输的<font color = '#DC143C'><strong>信号就会衰减到使CSMA&#x2F;CD协议无法正常工作</strong></font></li>
<li>在早期广泛使用粗同轴电缆或细同轴电缆共享总线以太网时，为了提高网络的地理覆盖范围，常用的是<font color = '#DC143C'><strong>工作在物理层的转发器</strong></font></li>
<li>IEEE 802.3标准规定，两个网段可用一个转发器连接起来，任意两个站点之间最多可以经过三个网段</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042130438.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>在10BASE-T星型以太网中，可使用<font color = '#DC143C'><strong>光纤</strong></font>和一对<font color = '#DC143C'><strong>光纤调制解调器</strong></font>来<font color = '#DC143C'><strong>扩展站点与集线器之间的距离</strong></font><ul>
<li>这种扩展方法比较简单，所需付出的代价是：为站点和集线器各增加一个用于电信号和光信号转换的光纤调制解调器，以及它们之间的一对通信光纤</li>
</ul>
</li>
<li>信号在光纤上的衰减和失真很小，因此使用这种方法可以很简单地将站点与集线器之间的距离扩展到1000m以上</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042135295.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="扩展共享式以太网的覆盖范围和站点数量"><a href="#扩展共享式以太网的覆盖范围和站点数量" class="headerlink" title="扩展共享式以太网的覆盖范围和站点数量"></a>扩展共享式以太网的覆盖范围和站点数量</h4><ul>
<li>以太网集线器一般具有8~32个接口，如果要连接的站点数量超过了单个集线器能够提供的接口数量，就需要使用多个集线器，这样就可以连接成覆盖更大的范围、连接更多站点的多级星型以太网</li>
<li>采用多个集线器连接而成的多级星型以太网，在扩展了网络覆盖范围和站点数量的同时，也带来了一些负面因素</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042143501.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="在数据链路层扩展以太网"><a href="#在数据链路层扩展以太网" class="headerlink" title="在数据链路层扩展以太网"></a>在数据链路层扩展以太网</h3><h4 id="使用网桥"><a href="#使用网桥" class="headerlink" title="使用网桥"></a>使用网桥</h4><ul>
<li>网桥（bridge）工作在数据链路层（包含其下的物理层），因此<font color = '#DC143C'><strong>网桥具备属于数据链路层范畴的相关能力</strong></font><ul>
<li>网桥可以<font color = '#DC143C'><strong>识别帧的结构</strong></font></li>
<li>网桥可以根据帧首部中的<font color = '#DC143C'><strong>目的MAC地址</strong></font>和网桥自身的<font color = '#DC143C'><strong>帧转发表</strong></font>来转发或丢弃所收到的帧</li>
</ul>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042148048.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="网桥的主要结构和基本工作原理"><a href="#网桥的主要结构和基本工作原理" class="headerlink" title="网桥的主要结构和基本工作原理"></a>网桥的主要结构和基本工作原理</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042154336.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="透明网桥的自学习和转发帧的流程"><a href="#透明网桥的自学习和转发帧的流程" class="headerlink" title="透明网桥的自学习和转发帧的流程"></a>透明网桥的自学习和转发帧的流程</h4><ul>
<li><p>透明网桥（Transparent Bridge）通过<font color = '#DC143C'><strong>自学习</strong></font>算法建立转发表</p>
</li>
<li><p>透明网桥中的 “<font color = '#DC143C'><strong>透明</strong></font>“，是指以太网中的各站点并不知道自己所发送的帧将会经过哪些网桥的转发，最终到达目的站点。也就是说，<font color = '#DC143C'><strong>以太网中的各网桥对于各站点而言是看不见的</strong></font></p>
</li>
<li><p>透明网桥的标准是IEEE 802.1D，它通过一种自学习算法<font color = '#DC143C'><strong>基于以太网中各站点间的相互通信</strong></font>逐步建立起自己的转发表</p>
<p>1、网桥收到帧后进行<font color = '#DC143C'><strong>登记（即自学习）</strong></font>，登记的内容为帧的<font color = '#DC143C'><strong>源MAC地址</strong></font>和进入网桥的<font color = '#DC143C'><strong>接口号</strong></font></p>
<p>2、网桥根据帧的目的MAC地址和网桥的转发表对帧进行转发，包含以下三种情况</p>
<ul>
<li><font color = '#DC143C'><strong>明确转发</strong></font>：网桥知道应当从哪个接口转发帧</li>
<li><font color = '#DC143C'><strong>盲目转发</strong></font>：网桥不知道应当从哪个接口转发帧，只能将其通过除进入网桥的接口外的其他所有接口转发</li>
<li><font color = '#DC143C'><strong>丢弃</strong></font>：网桥知道不应该转发该帧，将其丢弃</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意</p>
</blockquote>
<ol>
<li>如果网桥收到有<font color = '#DC143C'><strong>误码的帧</strong></font>则直接<font color = '#DC143C'><strong>丢弃</strong></font></li>
<li>如果网桥收到一个无误码的<font color = '#DC143C'><strong>广播帧</strong></font>，则不用进行查表，而是直接从除接收该广播帧的接口的<font color = '#DC143C'><strong>其他接口转发</strong></font>该广播帧</li>
<li>转发表中的每条记录都有其<font color = '#DC143C'><strong>有效时间，到期后自动删除</strong></font>！这是因为各站点的MAC地址与网桥接口的对应关系并不是永久性的，例如某个站点更换了网卡，其MAC地址就会改变</li>
</ol>
<h4 id="透明网桥的生成树协议STP"><a href="#透明网桥的生成树协议STP" class="headerlink" title="透明网桥的生成树协议STP"></a>透明网桥的生成树协议STP</h4><ul>
<li>为了提高以太网的<font color = '#DC143C'><strong>可靠性</strong></font>，有时需要在两个以太网之间使用多个透明网桥来提供<font color = '#DC143C'><strong>冗余链路</strong></font></li>
<li>在增加冗余链路提高以太网可靠性的同时，却给网络引入了<font color = '#DC143C'><strong>环路</strong></font></li>
<li>网络中的<font color = '#DC143C'><strong>广播帧将在环路中永久兜圈</strong></font>，造成广播帧充斥整个网络，<font color = '#DC143C'><strong>网络资源被白白浪费</strong></font>，而网络中的主机之间无法正常通信！</li>
<li>为了避免广播帧在环路中永久兜圈，透明网桥使用<font color = '#DC143C'><strong>生成树协议</strong></font>(Spanning Tree Protocol，STP)，可以在增加冗余链路提高网络可靠性的同时，又避免环路带来的问题<ul>
<li>不管网桥之间连接成了怎样复杂的带环拓扑，网桥之间通过<font color = '#DC143C'><strong>交互网桥协议单元</strong></font>（Bridge Protocol Data Unit，BPDU），<font color = '#DC143C'><strong>找出原网络拓扑的一个连通子集（即生成树）</strong></font>，在这个子集里整个连通的网络中<font color = '#DC143C'><strong>不存在环路</strong></font></li>
<li>当首次连接网桥或网络拓扑发生变化时（人为改变或出现故障），网桥都会重新构造生成树，以确保网络的连通</li>
</ul>
</li>
</ul>
<h3 id="交换式以太网"><a href="#交换式以太网" class="headerlink" title="交换式以太网"></a>交换式以太网</h3><ul>
<li>网桥的<font color = '#DC143C'><strong>接口数量很少</strong></font>，通常只有2~4个，一般只用来<font color = '#DC143C'><strong>连接不同的网段</strong></font></li>
<li>1990年面世的<font color = '#DC143C'><strong>交换式集线器</strong></font>（Switching Hub），实质上是<font color = '#DC143C'><strong>具有多个接口的网桥</strong></font>，常称为以<font color = '#DC143C'><strong>太网交换机</strong></font>（Switch）或二层交换机<ul>
<li>“二层” 是指以太网交换机工作在数据链路层（包括物理层）</li>
<li>与网桥相同，交换机内部的转发表也是通过自学习算法，基于网络中各主机间的通信，自动地逐步建立起来的</li>
<li>另外，交换机也使用生成树协议STP，来产生能够连通全网但不产生环路的通信路径</li>
</ul>
</li>
<li>仅使用交换机（而不使用集线器）的以太网就是交换式以太网</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042224465.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="以太网交换机"><a href="#以太网交换机" class="headerlink" title="以太网交换机"></a>以太网交换机</h3><ul>
<li><p>以太网<font color = '#DC143C'><strong>交换机</strong></font>（以下简称交换机）本质上就是一个<font color = '#DC143C'><strong>多接口的网桥</strong></font></p>
<ul>
<li>交换机自学习和转发帧的流程与网桥是相同的</li>
<li>另外，交换机也使用生成树协议STP，来产生能够连通全网但不产生环路的通信路径</li>
</ul>
</li>
<li><p>交换机的每个接口可以连接<font color = '#DC143C'><strong>计算机</strong></font>，也可以连接<font color = '#DC143C'><strong>集线器</strong></font>或另一个<font color = '#DC143C'><strong>交换机</strong></font></p>
<ul>
<li>当交换机的<font color = '#DC143C'><strong>接口与计算机或交换机连接</strong></font>时，可以工作在<font color = '#DC143C'><strong>全双工方式</strong></font>，并能<font color = '#DC143C'><strong>在自身内部同时连通多对接口</strong></font>，使每一对相互通信的计算机都能像独占传输媒体那样，无碰撞地传输数据，这样就<font color = '#DC143C'><strong>不需要使用CSMA&#x2F;CD协议</strong></font>了</li>
<li>当交换机的<font color = '#DC143C'><strong>接口连接的是集线器</strong></font>时，该接口就<font color = '#DC143C'><strong>只能使用CSMA&#x2F;CD协议</strong></font>并只能工作在<font color = '#DC143C'><strong>半双工方式</strong></font></li>
<li>现在的交换机和计算机中的网卡都能自动识别上述两种情况，并自动切换到相应的工作方式</li>
</ul>
</li>
<li><p>交换机一般都具有多种速率的接口，例如10Mb&#x2F;s、100Mb&#x2F;s、1Gb&#x2F;s甚至10Gb&#x2F;s的接口，大部分接口支持多速率自适应</p>
</li>
<li><p>一般的交换机都采用 “<font color = '#DC143C'><strong>存储转发</strong></font>“ 方式，为了减小交换机的转发时延，某些交换机采用了<font color = '#DC143C'><strong>直通</strong></font>（Cut-Through）交换方式</p>
</li>
<li><p>采用<font color = '#DC143C'><strong>直通交换方式</strong></font>的交换机，在<font color = '#DC143C'><strong>接收帧的同时就立即按帧的目的MAC地址决定该帧的转发接口</strong></font>，然后通过其内部<font color = '#DC143C'><strong>基于硬件的交叉矩阵</strong></font>进行转发，而不必把整个帧先缓存后再进行处理</p>
<ul>
<li>直通交换的<font color = '#DC143C'><strong>时延非常小</strong></font></li>
<li>直通交换<font color = '#DC143C'><strong>不检查差错就直接将帧转发出去</strong></font>，有可能会将一些无效帧转发给其他主机</li>
</ul>
</li>
</ul>
<h3 id="共享式以太网与交换式以太网的对比"><a href="#共享式以太网与交换式以太网的对比" class="headerlink" title="共享式以太网与交换式以太网的对比"></a>共享式以太网与交换式以太网的对比</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042235348.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>交换式以太网的网络性能远高于共享式以太网，集线器早已被交换机取代</li>
</ul>
<h3 id="以太网的MAC帧格式"><a href="#以太网的MAC帧格式" class="headerlink" title="以太网的MAC帧格式"></a>以太网的MAC帧格式</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311042238352.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="虚拟局域网VLAN"><a href="#虚拟局域网VLAN" class="headerlink" title="虚拟局域网VLAN"></a>虚拟局域网VLAN</h3><h4 id="诞生背景"><a href="#诞生背景" class="headerlink" title="诞生背景"></a>诞生背景</h4><ul>
<li>将多个站点通过一个或多个<font color = '#DC143C'><strong>以太网交换机</strong></font>连接起来就构建出了<font color = '#DC143C'><strong>交换式以太网</strong></font></li>
<li>交换式以太网中的所有站点都属于<font color = '#DC143C'><strong>同一个广播域</strong></font></li>
<li>随着交换式以太网规模的扩大，广播域也相应扩大。<font color = '#DC143C'><strong>巨大的广播域会带来一系列问题</strong></font><ul>
<li><font color = '#DC143C'><strong>广播风暴</strong></font>	广播风暴会浪费网络资源和各主机的CPU资源	</li>
<li>难以管理和维护，带来潜在的安全问题</li>
</ul>
</li>
<li>网络中会频繁出现广播信息<ul>
<li>TCP&#x2F;IP协议栈中的很多协议都会使用广播（例如地址解析协议ARP，路由信息协议RIPv1，动态主机配置协议DHCP）</li>
<li>NetBEUI: Windows下使用的广播型协议 </li>
<li>IPX&#x2F;SPX: Novell网络的协议栈</li>
<li>Apple Talk: Apple公司的网络协议栈</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>分割广播域</strong></font>的方法<ul>
<li>使用路由器可以隔离广播域（成本较高）</li>
<li>虚拟局域网技术应运而生</li>
</ul>
</li>
</ul>
<h4 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h4><ul>
<li>虚拟局域网（Virtual Local Area Network，VLAN）是一种将局域网内的站点划分成<font color = '#DC143C'><strong>与物理位置无关的逻辑组</strong></font>的技术，一个逻辑组就是一个VLAN，VLAN中的各站点具有某些共同的应用需求</li>
<li>属于同一VLAN的站点之间可以直接进行通信，而不同VLAN中的站点之间不能直接通信</li>
<li>网络管理员可对局域网中的各交换机进行配置来建立多个逻辑上独立的VLAN<ul>
<li>连接在同一交换机上的多个站点可以属于不同的VLAN，而属于同一VLAN的多个站点可以连接在不同的交换机上</li>
</ul>
</li>
</ul>
<blockquote>
<p>虚拟局域网VALN并不是一种新型网络，它只是局域网能够提供给用户的一种服务</p>
</blockquote>
<h4 id="实现机制"><a href="#实现机制" class="headerlink" title="实现机制"></a>实现机制</h4><ul>
<li>虚拟局域网VLAN有多种实现技术，最常见的就是<font color = '#DC143C'><strong>基于以太网交换机的接口来实现VLAN</strong></font>。这就需要交换机能够实现以下两个功能<ul>
<li>能够处理带有VLAN标记的帧，也就是<font color = '#DC143C'><strong>IEEE 802.1Q帧</strong></font></li>
<li>交换机的各接口可以支持<font color = '#DC143C'><strong>不同的接口类型</strong></font>，不同接口类型的接口对帧的处理方式有所不同</li>
</ul>
</li>
</ul>
<blockquote>
<p>IEEE 802.1Q帧</p>
</blockquote>
<ul>
<li>IEEE 802.1Q帧也称为Dot One Q帧，它对以太网V2的MAC帧格式进行了扩展：在源地址字段和类型字段之间插入了<font color = '#DC143C'><strong>4字节的VLAN标签</strong></font>（tag）字段</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070950535.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070950617.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>802.1Q帧一般不由用户主机处理，而是由以太网交换机来处理<ul>
<li>当交换机<font color = '#DC143C'><strong>收到普通的以太网MAC帧时</strong></font>，会给其<font color = '#DC143C'><strong>插入4字节的VLAN标签使之成为802.1Q帧</strong></font>，该处理简称为 “<font color = '#DC143C'><strong>打标签</strong></font>“</li>
<li>当交换机<font color = '#DC143C'><strong>转发802.1Q帧</strong></font>时，<font color = '#DC143C'><strong>可能会删除其4字节的VLAN标签使之成为普通的以太网MAC帧</strong></font>，该处理简称为 “<font color = '#DC143C'><strong>去标签</strong></font>“。交换机转发802.1Q帧时也有可能不进行 “去标签” 处理，是否进行 “去标签” 处理取决于交换机的接口类型</li>
</ul>
</li>
</ul>
<blockquote>
<p>以太网交换机的接口类型</p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070956717.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="以太网的发展"><a href="#以太网的发展" class="headerlink" title="以太网的发展"></a>以太网的发展</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311070959617.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>都使用<font color = '#DC143C'><strong>IEEE 802.3的帧格式</strong></font></li>
<li>都遵守<font color = '#DC143C'><strong>IEEE 802.3的最小帧长和最大帧长</strong></font>的规定</li>
<li>10吉比特以太网（10GE）和40&#x2F;100吉比特以太网（40GE&#x2F;100GE）<font color = '#DC143C'><strong>只工作在全双工方式</strong></font>而不存在争用媒体的问题，因此<font color = '#DC143C'><strong>不需要使用CSMA&#x2F;CD协议</strong></font>，这样传输距离就不再受碰撞检测的限制</li>
<li>都有<font color = '#DC143C'><strong>多种不同的物理层标准</strong></font>，10吉比特以太网（10GE）和40&#x2F;100吉比特以太网（40GE&#x2F;100GE）还增加了<font color = '#DC143C'><strong>支持城域网和广域网的物理层标准</strong></font></li>
</ul>
<h3 id="无线局域网"><a href="#无线局域网" class="headerlink" title="无线局域网"></a>无线局域网</h3><h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><ul>
<li>随着移动通信技术的发展，<font color = '#DC143C'><strong>无线局域网</strong></font>（Wireless Local Area Network，WLAN）自20世纪80年代末以来逐步进入市场</li>
<li>IEEE于1997年制定出了无线局域网的协议标准802.11，<font color = '#DC143C'><strong>802.11无线局域网</strong></font>是目前应用最广泛的无线局域网之一，更多地将其简称为<font color = '#DC143C'><strong>Wi-Fi</strong></font>（Wireless Fidelity，无线保真度）</li>
<li>802.11无线局域网可分为以下两类<ul>
<li>有固定基础设施的</li>
<li>无固定基础设施的</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>固定基础设施</strong></font>是指预先建立的、能够覆盖一定地理范围的、<font color = '#DC143C'><strong>多个固定的通信基站</strong></font></li>
<li>802.11无线局域网使用最多的是它的固定基础设施的组网方式</li>
</ul>
<h4 id="物理层-1"><a href="#物理层-1" class="headerlink" title="物理层"></a>物理层</h4><ul>
<li>802.11无线局域网的物理层非常复杂，根据<font color = '#DC143C'><strong>工作频段</strong></font>、<font color = '#DC143C'><strong>调制方式</strong></font>、<font color = '#DC143C'><strong>传输速率</strong></font>等，可将其分为多种物理层标准：</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071014671.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>802.11无线网卡一般会被做成<font color = '#DC143C'><strong>多模</strong></font>的，以便能适应多种不同的物理层标准，例如支持802.11b&#x2F;g&#x2F;n</li>
<li>无线局域网最初还使用红外技术（infrared，IR）和跳频扩频（Frequency Hopping Spread Spectrum，FHSS）技术，但目前很少使用了</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071014172.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="数据链路层-1"><a href="#数据链路层-1" class="headerlink" title="数据链路层"></a>数据链路层</h4><blockquote>
<p>使用CSMA&#x2F;CA协议的原因</p>
</blockquote>
<ul>
<li>对于802.11无线局域网，其使用无线信道传输数据，这与共享总线以太网使用有线<font color = '#DC143C'><strong>传输介质不同</strong></font>。因此，802.11无线局域网<font color = '#DC143C'><strong>不能简单照搬</strong></font>共享总线以太网使用的<font color = '#DC143C'><strong>CSMA&#x2F;CD协议</strong></font></li>
<li>802.11无线局域网采用了另一种称为CSMA&#x2F;CA的协议，也就是<font color = '#DC143C'><strong>载波监听多址接入&#x2F;碰撞避免</strong></font>（Carrier Sense Multiple Access&#x2F;Collision Avoidance，CSMA&#x2F;CA）</li>
<li>CSMA&#x2F;CA协议<font color = '#DC143C'><strong>仍然采用</strong></font>CSMA&#x2F;CD协议中的<font color = '#DC143C'><strong>CSMA</strong></font>，以 “先听后说” 的方式来减少碰撞的发生，但是<font color = '#DC143C'><strong>将 “碰撞检测CD” 改为了 “碰撞避免CA”</strong></font></li>
</ul>
<blockquote>
<p>不采用 “碰撞检测CD” 的原因</p>
</blockquote>
<ol>
<li>由于<font color = '#DC143C'><strong>无线信道的传输环境复杂</strong></font>且信号强度的动态范围非常大，在802.11无线网卡上<font color = '#DC143C'><strong>接收到的信号强度一般都远远小于发送信号的强度</strong></font>，信号强度甚至相差百万倍。因此，<font color = '#DC143C'><strong>如果要在802.11无线网卡上实现碰撞检测</strong></font>，<font color = '#DC143C'><strong>对硬件的要求非常高</strong></font></li>
<li>即使能够在硬件上实现碰撞检测功能，但由于无线电波传播的特殊性（<font color = '#DC143C'><strong>存在隐蔽站问题</strong></font>），<font color = '#DC143C'><strong>还会出现无法检测到碰撞的情况</strong></font>，因此实现<font color = '#DC143C'><strong>碰撞检测并没有意义</strong></font></li>
</ol>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071028380.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>CSMA&#x2F;CA协议的基本工作原理</p>
</blockquote>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071031861.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071031926.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="MAC帧"><a href="#MAC帧" class="headerlink" title="MAC帧"></a>MAC帧</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071328410.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071332642.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071332719.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><h3 id="概述-5"><a href="#概述-5" class="headerlink" title="概述"></a>概述</h3><h4 id="分组转发和路由选择"><a href="#分组转发和路由选择" class="headerlink" title="分组转发和路由选择"></a>分组转发和路由选择</h4><ul>
<li>网络层的主要任务就是<font color = '#DC143C'><strong>将分组从源主机经过多个网络和多段链路传输到目的主机</strong></font>，可以将任务划分为<font color = '#DC143C'><strong>分组转发</strong></font>和<font color = '#DC143C'><strong>路由选择</strong></font>两种重要的功能</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071337269.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="网路层向其上层提供的两种服务"><a href="#网路层向其上层提供的两种服务" class="headerlink" title="网路层向其上层提供的两种服务"></a>网路层向其上层提供的两种服务</h4><blockquote>
<p>面向连接的虚电路服务</p>
</blockquote>
<ul>
<li>核心思想是 “<font color = '#DC143C'><strong>可靠通信应由网络自身来保证</strong></font>“</li>
<li>必须首先<font color = '#DC143C'><strong>建立网络层连接</strong></font> <font color = '#DC143C'><strong>虚电路</strong></font>（Virtual Circuit，VC），以保证通信双方所需的一切网络资源</li>
<li>通信双方<font color = '#DC143C'><strong>沿着已建立的虚电路发送分组</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071846737.png" srcset="/img/loading.gif" lazyload></p>
<blockquote>
<p>无连接的数据报服务</p>
</blockquote>
<ul>
<li>核心思想是 “<font color = '#DC143C'><strong>可靠通信应由用户主机来保证</strong></font>“</li>
<li><font color = '#DC143C'><strong>不需要建立网络层连接</strong></font></li>
<li><font color = '#DC143C'><strong>每个分组可走不同的路径</strong></font>。因此，每个分组的首部都必须携带目的主机的完整地址</li>
<li>通信结束后，<font color = '#DC143C'><strong>没有需要释放的连接</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071850257.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="网际协议和异构网络互连"><a href="#网际协议和异构网络互连" class="headerlink" title="网际协议和异构网络互连"></a>网际协议和异构网络互连</h3><h4 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h4><ul>
<li>网际协议（Internet Protocol，IP）是TCP&#x2F;IP体系结构<font color = '#DC143C'><strong>网际层中的核心协议</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071905484.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="异构网络互连"><a href="#异构网络互连" class="headerlink" title="异构网络互连"></a>异构网络互连</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071907977.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>当IP网上的主机进行通信时，就好像在一个单个网络上通信一样，它们看不见互连的各网络的具体异构细节</li>
</ul>
<h3 id="IPv4地址及其编址方法"><a href="#IPv4地址及其编址方法" class="headerlink" title="IPv4地址及其编址方法"></a>IPv4地址及其编址方法</h3><h4 id="概述-6"><a href="#概述-6" class="headerlink" title="概述"></a>概述</h4><ul>
<li>IPv4地址是给因特网（Internet）上的<font color = '#DC143C'><strong>每一个主机（或路由器）的每一个接口</strong></font>分配的一个在全世界范围内<font color = '#DC143C'><strong>唯一的32比特的标识符</strong></font></li>
<li>IPv4地址由<font color = '#DC143C'><strong>因特网名字和数字分配机构</strong></font>（Internet Corporation For Assigned Names And Numbers，ICANN）进行分配</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071913954.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><font color = '#DC143C'><strong>IPv4地址的编址方法</strong></font>经历了三个历史阶段</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071914763.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h4><ul>
<li>由于IPv4地址由32比特构成，不方便阅读、记录以及输入等，因此IPv4地址采用<font color = '#DC143C'><strong>点分十进制表示方法</strong></font>以方便用户使用</li>
</ul>
<h4 id="分类编址方法"><a href="#分类编址方法" class="headerlink" title="分类编址方法"></a>分类编址方法</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071922767.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><font color = '#DC143C'><strong>A类</strong></font>、<font color = '#DC143C'><strong>B类</strong></font>和<font color = '#DC143C'><strong>C类</strong></font>地址都是<font color = '#DC143C'><strong>单播地址</strong></font>，只有单播地址可以<font color = '#DC143C'><strong>分配给网络中的主机（或路由器）的各接口</strong></font></li>
<li><font color = '#DC143C'><strong>主机号为 “全0”</strong></font> 的地址是<font color = '#DC143C'><strong>网络地址</strong></font>，<font color = '#DC143C'><strong>不能分配</strong></font>给主机（或路由器）的各接口</li>
<li><font color = '#DC143C'><strong>主机号为 “全1”</strong></font> 的地址是<font color = '#DC143C'><strong>广播地址</strong></font>，<font color = '#DC143C'><strong>不能分配</strong></font>给主机（或路由器）的各接口</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311071925393.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072211310.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="划分子网编址方法"><a href="#划分子网编址方法" class="headerlink" title="划分子网编址方法"></a>划分子网编址方法</h4><ul>
<li>随着更多的中小网络加入因特网，<font color = '#DC143C'><strong>IPv4分类编址方法不够灵活</strong></font>、<font color = '#DC143C'><strong>容易造成大量IPv4地址资源浪费</strong></font>的缺点就暴露出来了</li>
<li>为新增网络申请新的网络号存在以下弊端<ul>
<li>需要等待时间和花费更多的费用</li>
<li>会增加其他路由器中路由条目的数量</li>
<li>浪费原有网络号中剩余的大量地址</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>子网掩码</strong></font>可以表明分类IPv4地址的主机号部分被借用了几个比特作为子网号</li>
<li>与IPv4地址类似，子网掩码也是由<font color = '#DC143C'><strong>32比特</strong></font>构成的<ul>
<li>用左起多个<font color = '#DC143C'><strong>连续的比特1</strong></font>对应IPv4地址中的<font color = '#DC143C'><strong>网络号和子网号</strong></font></li>
<li>之后的多个<font color = '#DC143C'><strong>连续的比特0</strong></font>对应IPv4地址中的<font color = '#DC143C'><strong>主机号</strong></font></li>
</ul>
</li>
<li>将划分子网的<font color = '#DC143C'><strong>IPv4地址与相应的子网掩码</strong></font>进行逐比特的<font color = '#DC143C'><strong>逻辑和运算</strong></font>，就可<font color = '#DC143C'><strong>得到</strong></font>该IPv4地址所在<font color = '#DC143C'><strong>子网的网络地址</strong></font></li>
<li>给定一个分类的IPv4地址和其相应的子网掩码，就可以得出子网划分的细节<ul>
<li>划分出的子网数量</li>
<li>每个子网可分配的地址数量</li>
<li>每个子网的网络地址和广播地址</li>
<li>每个子网可分配的最小地址和最大地址</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>默认子网掩码</strong></font>是指在<font color = '#DC143C'><strong>未划分子网的情况下使用的子网掩码</strong></font><ul>
<li>A类：255.0.0.0</li>
<li>B类：255.255.0.0</li>
<li>C类：255.255.255.0</li>
</ul>
</li>
</ul>
<h4 id="无分类编址方法"><a href="#无分类编址方法" class="headerlink" title="无分类编址方法"></a>无分类编址方法</h4><ul>
<li><p>无分类编址方法使用的<font color = '#DC143C'><strong>地址掩码</strong></font>与划分子网使用的<font color = '#DC143C'><strong>子网掩码</strong></font>类似，由32比特构成</p>
<ul>
<li>用左起多个<font color = '#DC143C'><strong>连续的比特1</strong></font>对应IPv4地址中的<font color = '#DC143C'><strong>网络前缀</strong></font></li>
<li>之后的多个<font color = '#DC143C'><strong>连续的比特0</strong></font>对应IPv4地址中的<font color = '#DC143C'><strong>主机号</strong></font></li>
</ul>
</li>
<li><p>为了简便起见，可以不明确给出配套的地址掩码的点分十进制形式，而是在无分类编址的IPv4地址后面加上斜线 “&#x2F;“，在斜线之后写上网络前缀所占的比特数量（也就是地址掩码中左起连续比特1的数量），这种记法称为<font color = '#DC143C'><strong>斜线记法</strong></font></p>
</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072231298.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="应用规划"><a href="#应用规划" class="headerlink" title="应用规划"></a>应用规划</h3><ul>
<li>IPv4地址的应用规划是将给定的IPv4地址块（或分类网络）划分成若干个更小的地址块（或子网），并将这些地址块（或子网）分配给互联网中的不同网络，进而可以给给网络中的主机和路由器的接口分配IPv4地址</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072234032.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="IPv4地址与MAC地址"><a href="#IPv4地址与MAC地址" class="headerlink" title="IPv4地址与MAC地址"></a>IPv4地址与MAC地址</h3><h4 id="封装位置"><a href="#封装位置" class="headerlink" title="封装位置"></a>封装位置</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072317966.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="数据包传送过程中的变化情况"><a href="#数据包传送过程中的变化情况" class="headerlink" title="数据包传送过程中的变化情况"></a>数据包传送过程中的变化情况</h4><ul>
<li>在数据包的传送过程中，数据包的<font color = '#DC143C'><strong>源IP地址和目的IP地址保持不变</strong></font></li>
<li>在数据包的传送过程中，数据包的<font color = '#DC143C'><strong>源MAC地址和目的MAC地址逐链路（或逐网络）改变</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311072323069.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h4><ul>
<li><p>如果仅使用MAC地址进行通信，则会出现以下主要问题</p>
<ul>
<li><p>因特网中的每台路由器的<font color = '#DC143C'><strong>路由表</strong></font>中就必须<font color = '#DC143C'><strong>记录</strong></font>因特网上<font color = '#DC143C'><strong>所有主机和路由器各接口的MAC地址</strong></font></p>
</li>
<li><p>手工给路由器配置路由器几乎是不可能完成的任务，即使使用路由协议让路由器通过相互交换路由信息来自动构建路由表，也会因为<font color = '#DC143C'><strong>路由信息需要包含海量的MAC地址信息而严重占用通信资源</strong></font></p>
</li>
<li><p><font color = '#DC143C'><strong>包含海量MAC地址的路由信息需要路由器具备极大的存储空间</strong></font>，并且会给分组的<font color = '#DC143C'><strong>查表转发带来非常大的时延</strong></font></p>
</li>
</ul>
</li>
<li><p>因特网的网际层<font color = '#DC143C'><strong>使用IP地址进行寻址</strong></font>，就可使因特网中各<font color = '#DC143C'><strong>路由器</strong></font>的路由表中的路由记录的数量大大减少，因为<font color = '#DC143C'><strong>只需记录部分网络的网络地址</strong></font>，而不是记录每个网络中各通信设备的各接口的MAC地址</p>
<ul>
<li>路由器收到IP数据报后，根据其首部中的目的IP地址的网络号部分，基于自己的路由表进行查表转发</li>
</ul>
</li>
</ul>
<h3 id="地址解析协议ARP"><a href="#地址解析协议ARP" class="headerlink" title="地址解析协议ARP"></a>地址解析协议ARP</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131316008.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131317477.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>ARP协议的相关注意事项：<ul>
<li>由于ARP协议的主要用途是从网际层使用的IP地址解析出在数据链路层使用的MAC地址。因此，将ARP协议划归在<font color = '#DC143C'><strong>网际层</strong></font>，将ARP协议划归在<font color = '#DC143C'><strong>数据链路层</strong></font>。两种都是可以的</li>
<li>除了ARP请求报文和响应报文，<font color = '#DC143C'><strong>ARP协议还有其他类型的报文</strong></font>，例如用于检查IP地址冲突的 “无故ARP”</li>
<li>由于ARP协议很在就指定出来，当时并没有考虑网络安全问题。因此，ARP协议没有安全验证机制，存在<font color = '#DC143C'><strong>ARP欺骗和攻击</strong></font>等问题</li>
</ul>
</li>
</ul>
<h3 id="IP数据报的发送和转发过程"><a href="#IP数据报的发送和转发过程" class="headerlink" title="IP数据报的发送和转发过程"></a>IP数据报的发送和转发过程</h3><ul>
<li>主机发送IP数据报<ul>
<li><font color = '#DC143C'><strong>判断目的主机是否与自己在同一个网络</strong></font><ul>
<li>若在<font color = '#DC143C'><strong>同一个网络</strong></font>，则属于<font color = '#DC143C'><strong>直接交付</strong></font></li>
<li>若<font color = '#DC143C'><strong>不在同一个网络</strong></font>，则属于<font color = '#DC143C'><strong>间接交付</strong></font>。发送给主机所在网络的<font color = '#DC143C'><strong>默认网关</strong></font>（路由器），由默认网关帮忙转发</li>
</ul>
</li>
</ul>
</li>
<li>路由器转发IP数据报<ol>
<li><font color = '#DC143C'><strong>检查收到的IP数据报是否正确</strong></font>（生存时间是否结束；首部是否误码）<ul>
<li>若出错，则丢弃该IP数据报并给发送该IP数据报的源主机发送差错报告</li>
<li>若正确，则进行查表转发</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>基于IP数据报首部中的目的IP地址在路由表中进行查找</strong></font><ul>
<li>若找到匹配的路由条目，则按该路由条目的指示进行转发</li>
<li>若找不到匹配的路由条目，则丢弃该IP数据报，并向发送该IP数据报的源主机发送差错报告</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="IPv4数据报的首部格式"><a href="#IPv4数据报的首部格式" class="headerlink" title="IPv4数据报的首部格式"></a>IPv4数据报的首部格式</h3><ul>
<li>固定部分是指<font color = '#DC143C'><strong>每个IPv4数据报都必须要包含的部分</strong></font></li>
<li>某些IPv4数据报的首部，除了包含20字节的固定部分，还包含一些可选的字段来<font color = '#DC143C'><strong>增加IPv4数据报的功能</strong></font></li>
<li>IPv4数据报首部中的各字段或某些字段的组合，用来表达IPv4协议的相关功能</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131330289.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="静态路由配置"><a href="#静态路由配置" class="headerlink" title="静态路由配置"></a>静态路由配置</h3><ul>
<li>静态路由配置是指用户或网络运维人员使用路由器的相关命令给路由器<font color = '#DC143C'><strong>人工配置路由表</strong></font><ul>
<li>人工配置方式<font color = '#DC143C'><strong>简单、开销小</strong></font>、但<font color = '#DC143C'><strong>不能及时适应网络状态（流量、拓扑等）的变化</strong></font>，一般只在小规模网络中采用</li>
</ul>
</li>
<li>进行静态路由配置需要认真考虑和谨慎操作，否则可能出现以下问题：<ul>
<li>路由条目<font color = '#DC143C'><strong>配置错误</strong></font>，甚至导致出现<font color = '#DC143C'><strong>路由环路</strong></font></li>
<li>聚合路由条目可能<font color = '#DC143C'><strong>引入不存在的网络</strong></font></li>
</ul>
</li>
</ul>
<h3 id="因特网路由选择协议概述"><a href="#因特网路由选择协议概述" class="headerlink" title="因特网路由选择协议概述"></a>因特网路由选择协议概述</h3><h4 id="路由选择分类"><a href="#路由选择分类" class="headerlink" title="路由选择分类"></a>路由选择分类</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131340543.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="采用分层次的路由选择协议"><a href="#采用分层次的路由选择协议" class="headerlink" title="采用分层次的路由选择协议"></a>采用分层次的路由选择协议</h4><ul>
<li>因特网是全球最大的互联网，它所采取的路由选择协议具有以下三个主要特点：</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131341431.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311131343767.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="路由信息协议RIP"><a href="#路由信息协议RIP" class="headerlink" title="路由信息协议RIP"></a>路由信息协议RIP</h3><h4 id="基本概念-2"><a href="#基本概念-2" class="headerlink" title="基本概念"></a>基本概念</h4><ul>
<li>路由信息协议（Routing Information Protocol，RIP）是内部网关协议中最先得到广泛使用的协议之一，其相关标准文档为[RFC 1058]</li>
<li>RIP要求自治系统AS内的每一个路由器，都要维护从它自己到AS内其他每一个网络的距离记录。这是一组距离，称为<font color = '#DC143C'><strong>距离向量</strong></font>（Distance-Vector，D-V）</li>
<li>RIP使用<font color = '#DC143C'><strong>跳数</strong></font>（Hop Count）作为度量（Metric）来衡量到达目的网络的<font color = '#DC143C'><strong>距离</strong></font><ul>
<li>RIP将路由器<font color = '#DC143C'><strong>到直连网络</strong></font>的<font color = '#DC143C'><strong>距离定义为1</strong></font></li>
<li>RIP将路由器<font color = '#DC143C'><strong>到非直连网络</strong></font>的<font color = '#DC143C'><strong>距离定义为所经过的路由器数加1</strong></font></li>
<li>RIP允许一条路径最多只能包含15个路由器，<font color = '#DC143C'><strong>距离等于16时相当于不可达</strong></font>。因此<font color = '#DC143C'><strong>RIP只适用于小型互联网</strong></font></li>
</ul>
</li>
<li>RIP认为<font color = '#DC143C'><strong>好的路由</strong></font>就是 “距离短” 的路由，也就是所<font color = '#DC143C'><strong>通过路由数量最少的路由</strong></font></li>
<li>当到达同一目的的网络有多条RIP距离相等的路由时，可以进行<font color = '#DC143C'><strong>等价负载均衡</strong></font>，也就是将通信量均衡地分布到多条等价的路径上</li>
<li>RIP具有以下三个重要特点：<ul>
<li>和谁交换信息：仅和<font color = '#DC143C'><strong>相邻路由器</strong></font>交换信息</li>
<li>交换什么信息：路由器自己的<font color = '#DC143C'><strong>路由表</strong></font>。即本路由器到所在自治系统AS中各网络的最短RIP距离，以及到各网络应经过的下一跳路由器</li>
<li>何时交换信息：<font color = '#DC143C'><strong>周期性交换</strong></font>（例如，每个约30秒）。为了加快RIP的收敛速度，当网络拓扑发生变化时，路由器要即时向相邻路由器通告拓扑变化后的路由信息，这称为<font color = '#DC143C'><strong>触发更新</strong></font></li>
</ul>
</li>
</ul>
<h4 id="RIP的基本工作过程"><a href="#RIP的基本工作过程" class="headerlink" title="RIP的基本工作过程"></a>RIP的基本工作过程</h4><ol>
<li>路由器刚开始工作时，<font color = '#DC143C'><strong>只知道自己到直连网络的RIP距离为1</strong></font></li>
<li>每个路由器<font color = '#DC143C'><strong>仅和相邻路由器周期性地交换并更新路由信息</strong></font></li>
<li>若干次交换和更新后，<font color = '#DC143C'><strong>每个路由器都知道到达本自治系统AS内各网络的最短距离和下一跳路由器</strong></font>，称为<font color = '#DC143C'><strong>收敛</strong></font></li>
</ol>
<h4 id="RIP的距离向量算法"><a href="#RIP的距离向量算法" class="headerlink" title="RIP的距离向量算法"></a>RIP的距离向量算法</h4><ul>
<li><p>RIP路由条目更新规则</p>
<ul>
<li><font color = '#DC143C'><strong>发现了新网络</strong></font>，添加</li>
<li>到达目的网络，<font color = '#DC143C'><strong>相同下一跳，最新信息</strong></font>，更新</li>
<li>到达目的网络，<font color = '#DC143C'><strong>不同下一跳，新路由优势</strong></font>，更新</li>
<li>到达目的网络，<font color = '#DC143C'><strong>不同下一跳，新路由劣势</strong></font>，不更新</li>
<li>到达目的网络，<font color = '#DC143C'><strong>不同下一跳</strong></font>，等价负载均衡</li>
</ul>
</li>
<li><p>除了上述RIP路由条目更新规则，在RIP的距离向量算法中还包含以下一些<font color = '#DC143C'><strong>时间参数</strong></font></p>
<ul>
<li>路由器每隔<font color = '#DC143C'><strong>大约30秒</strong></font>向其所有相邻路由器发送路由更新报文</li>
<li>若<font color = '#DC143C'><strong>180秒</strong></font>（默认）没有收到某条路由条目的更新报文，则把该路由条目标记为无效（即把RIP距离设置为16，表示不可达），若再过一段时间（如120秒），还没有收到该路由条目的更新报文，则将该路由条目从路由表中删除</li>
</ul>
</li>
</ul>
<h4 id="RIP存在的问题"><a href="#RIP存在的问题" class="headerlink" title="RIP存在的问题"></a>RIP存在的问题</h4><ul>
<li>”坏消息传播得慢“ 的问题又被称为路由环路或<font color = '#DC143C'><strong>RIP距离无穷计数问题</strong></font>。这是距离向量算法的一个固有问题。可以采取以下多种措施<font color = '#DC143C'><strong>减少</strong></font>出现该问题的概率或减小该问题带来的危害<ul>
<li>限制<font color = '#DC143C'><strong>最大RIP距离为15</strong></font>（16表示不可达）</li>
<li>当路由表发生变化时就立即发送路由更新报文（即 ”<font color = '#DC143C'><strong>触发更新</strong></font>“ ），而不仅是周期性发送</li>
<li>让路由器记录到收到某个特定路由信息的接口，而不让同一路由信息再通过此接口向反方向传送（即 ”<font color = '#DC143C'><strong>水平分割</strong></font>“ ）</li>
</ul>
</li>
</ul>
<h4 id="RIP版本和相关报文的封装"><a href="#RIP版本和相关报文的封装" class="headerlink" title="RIP版本和相关报文的封装"></a>RIP版本和相关报文的封装</h4><ul>
<li>现在较新的RIP版本是1998年11月公布的<font color = '#DC143C'><strong>RIP2</strong></font>[RFC 2453]，已经成为因特网标准协议。与RIP1相比，RIP2可以支持<font color = '#DC143C'><strong>变长子网掩码和CIDR</strong></font>。另外，RIP2还提供<font color = '#DC143C'><strong>简单的鉴别</strong></font>过程并支持<font color = '#DC143C'><strong>多播</strong></font></li>
<li>RIP相关报文使用运输层的用户数据报协议UDP进行封装，使用的<font color = '#DC143C'><strong>UDP端口号为520</strong></font><ul>
<li>从<font color = '#DC143C'><strong>RIP报文封装</strong></font>的角度看，RIP属于TCP&#x2F;IP体系结构的<font color = '#DC143C'><strong>应用层</strong></font></li>
<li>但RIP的核心功能是<font color = '#DC143C'><strong>路由选择</strong></font>，这属于TCP&#x2F;IP体系结构的<font color = '#DC143C'><strong>网际层</strong></font></li>
</ul>
</li>
</ul>
<h4 id="RIP的优缺点"><a href="#RIP的优缺点" class="headerlink" title="RIP的优缺点"></a>RIP的优缺点</h4><h5 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h5><ul>
<li>实现<font color = '#DC143C'><strong>简单</strong></font>，路由器开销小</li>
<li>如果一个路由器发现了RIP距离更短的路由，那么这种更新信息就传播得很快，即 “<font color = '#DC143C'><strong>好消息传播得块</strong></font>”</li>
</ul>
<h5 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h5><ul>
<li>RIP限制了<font color = '#DC143C'><strong>最大RIP距离为15</strong></font>，这就限制了使用RIP的自治系统AS的规模</li>
<li>相邻路由器之间交换的路由信息是路由器中的<font color = '#DC143C'><strong>完整路由表</strong></font>，因而随着网络规模的扩大，开销也随之增大</li>
<li>“<font color = '#DC143C'><strong>坏消息传播得慢</strong></font>”，使更新过程的收敛时间过长。因此，对于规模较大的自治系统AS，应当使用OSPF协议</li>
</ul>
<h3 id="开放最短路径优先OSPF"><a href="#开放最短路径优先OSPF" class="headerlink" title="开放最短路径优先OSPF"></a>开放最短路径优先OSPF</h3><h4 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h4><ul>
<li><p>开放最短路径优先（Open Shortest Path First，OSPF）协议是为了<font color = '#DC143C'><strong>克服路由信息协议RIP的缺点</strong></font>在1989年开发出来的</p>
<ul>
<li>“<font color = '#DC143C'><strong>开放</strong></font>” 表明OSPF协议不是受某一厂商控制，而是<font color = '#DC143C'><strong>公开发表</strong></font>的</li>
<li>“<font color = '#DC143C'><strong>最短路径优先</strong></font>” 是因为使用了Dijkstra提出的<font color = '#DC143C'><strong>最短路径算法</strong></font>（Shortest Path First，SPF）</li>
</ul>
</li>
<li><p>OSPF是基于<font color = '#DC143C'><strong>链路状态</strong></font>的，而不像RIP是基于距离向量的</p>
</li>
<li><p>OSPF基于链路状态并采用最短路径算法计算路由，从算法上保证了<font color = '#DC143C'><strong>不会产生路由环路</strong></font></p>
</li>
<li><p>OSPF<font color = '#DC143C'><strong>不限制网络规模，更新效率高，收敛速度快</strong></font></p>
</li>
<li><p>链路状态（Link State，LS）是指本路由器都和<font color = '#DC143C'><strong>哪些路由器相邻</strong></font>，以及<font color = '#DC143C'><strong>相应链路的 “代价（cost）”</strong></font></p>
<ul>
<li>“<font color = '#DC143C'><strong>代价</strong></font>” 用来表示费用、距离、时延和带宽等，这些都由网络管理人员来决定</li>
</ul>
</li>
<li><p>OSPF相邻路由器之间通过交互<font color = '#DC143C'><strong>问候（Hello）分组</strong></font>来建立和维护<font color = '#DC143C'><strong>邻居关系</strong></font></p>
<ul>
<li>问候（Hello）分组封装在<font color = '#DC143C'><strong>IP数据报</strong></font>中，发往<font color = '#DC143C'><strong>组播地址224.0.0.5</strong></font>。IP数据报首部中的<font color = '#DC143C'><strong>协议号</strong></font>字段的取值为89，表明IP数据报的数据载荷为OSPF分组</li>
<li>问候（Hello）分组的<font color = '#DC143C'><strong>发送周期为10秒</strong></font></li>
<li>若<font color = '#DC143C'><strong>40秒</strong></font>未收到来自邻居路由器的问候（Hello）分组，则认为邻居路由器不可达</li>
<li>每个路由器都会建立一张<font color = '#DC143C'><strong>邻居表</strong></font></li>
</ul>
</li>
<li><p>使用OSPF的每个路由器都会产生<font color = '#DC143C'><strong>链路状态通告</strong></font>（Link State Advertisement，LSA）</p>
</li>
<li><p>LSA中包含以下两类链路状态信息：</p>
<ul>
<li><font color = '#DC143C'><strong>直连网络</strong></font>的链路状态信息</li>
<li><font color = '#DC143C'><strong>邻居路由器</strong></font>的链路状态信息</li>
</ul>
</li>
<li><p>链路状态通告LSA被封装在<font color = '#DC143C'><strong>链路状态更新</strong></font>（Link State Update，LSU）分组中，采用<font color = '#DC143C'><strong>可靠的洪泛法</strong></font>（Flooding）进行发送</p>
<ul>
<li>洪泛法的要点是路由器<font color = '#DC143C'><strong>向自己所有的邻居路由器发送链路状态更新分组</strong></font>，收到该分组的各路由器又将该分组转发给自己所有的邻居路由器（但其上游路由器除外），以此类推</li>
<li>可靠是指收到链路状态更新分组后要发送确认，<font color = '#DC143C'><strong>收到重复的更新分组无需再次转发</strong></font>，但要发送一次确认</li>
</ul>
</li>
<li><p>使用OSPF的每一个路由器都有一个<font color = '#DC143C'><strong>链路状态数据库</strong></font>（Link State Database，LSDB），用于<font color = '#DC143C'><strong>存储链路状态通告LSA</strong></font></p>
</li>
</ul>
<h4 id="OSPF的五种分组类型"><a href="#OSPF的五种分组类型" class="headerlink" title="OSPF的五种分组类型"></a>OSPF的五种分组类型</h4><p>  <img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132006353.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="OSPF的基本工作过程"><a href="#OSPF的基本工作过程" class="headerlink" title="OSPF的基本工作过程"></a>OSPF的基本工作过程</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132006696.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="多点接入网络中的OSPF路由器"><a href="#多点接入网络中的OSPF路由器" class="headerlink" title="多点接入网络中的OSPF路由器"></a>多点接入网络中的OSPF路由器</h4><ul>
<li>为了<font color = '#DC143C'><strong>减少洪泛发送问候分组和链路状更新分组的数量</strong></font>，OSPF采用以下措施<ul>
<li>选举<font color = '#DC143C'><strong>指定路由器</strong></font>（Designated Router，DR）和<font color = '#DC143C'><strong>备用的指定路由器</strong></font>（Backup Designated Router，BDR）</li>
<li><font color = '#DC143C'><strong>所有非DR&#x2F;BDR只与DR&#x2F;BDR建立邻居关系</strong></font></li>
<li><font color = '#DC143C'><strong>非DR&#x2F;BDR之间通过DR&#x2F;BDR交换信息</strong></font></li>
</ul>
</li>
</ul>
<h4 id="OSPF划分区域"><a href="#OSPF划分区域" class="headerlink" title="OSPF划分区域"></a>OSPF划分区域</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132013918.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="边界网关协议BGP"><a href="#边界网关协议BGP" class="headerlink" title="边界网关协议BGP"></a>边界网关协议BGP</h3><h4 id="基本概念-3"><a href="#基本概念-3" class="headerlink" title="基本概念"></a>基本概念</h4><ul>
<li>边界网关协议（Border Gateway Protocol，BGP）属于外部网关协议EGP这个类别，用于<font color = '#DC143C'><strong>自制系统AS之间的路由选择协议</strong></font></li>
<li>由于在不同AS内度量路由的 “代价” （距离、带宽、费用等）可能不同，因此<font color = '#DC143C'><strong>对于AS之间的路由选择</strong></font>，<font color = '#DC143C'><strong>使用统一的 “代价” 作为度量来寻找最佳路由是不行的</strong></font></li>
<li>AS之间的路由选择还必须考虑相关<font color = '#DC143C'><strong>策略</strong></font>，这些策略包括政治、经济、安全等，它们都是由网络管理人员对每一个路由器进行设置的。但这些策略并不是自治系统之间的路由选择协议本身</li>
<li><font color = '#DC143C'><strong>BGP只能是力求寻找一条能够到达目的网络且比较好的路由（即不能兜圈子），而非要寻找一条最佳路由</strong></font></li>
<li>在配置BGP时，每个AS的管理员要选择至少一个路由器作为该AS的 “<font color = '#DC143C'><strong>BGP发言人</strong></font>”</li>
<li>一般来说，两个BGP发言人都是通过一个共享网络连接在一起的，而BGP发言人往往就是<font color = '#DC143C'><strong>BGP边界路由器</strong></font></li>
<li>使用TCP连接交换路由信息的两个BGP发言人，彼此称为对方的<font color = '#DC143C'><strong>邻站</strong></font>（neighbor）或<font color = '#DC143C'><strong>对等站</strong></font>（peer）</li>
<li>BGP发言人除了运行BGP协议外，还必须运行自己所在AS所使用的内部网关协议IGP，例如RIP或OSPF</li>
<li>当BGP发言人相互交换了网络可达性的信息后，各BGP发言人就<font color = '#DC143C'><strong>根据</strong></font>所采用的<font color = '#DC143C'><strong>策略</strong></font>，从收到的路由信息中<font color = '#DC143C'><strong>找出到达各自治系统的较好的路由</strong></font>，也就是构造出树形结构且<font color = '#DC143C'><strong>不存在环路的自治系统连通图</strong></font></li>
<li>BGP适用于多级结构的因特网</li>
</ul>
<h4 id="BGP-4的四种报文"><a href="#BGP-4的四种报文" class="headerlink" title="BGP-4的四种报文"></a>BGP-4的四种报文</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132025212.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="路由器的基本工作原理"><a href="#路由器的基本工作原理" class="headerlink" title="路由器的基本工作原理"></a>路由器的基本工作原理</h3><ul>
<li><font color = '#DC143C'><strong>路由器</strong></font>是一种具有多个输入端口和输出端口的<font color = '#DC143C'><strong>专用计算机</strong></font>，其任务是<font color = '#DC143C'><strong>转发分组</strong></font></li>
<li><font color = '#DC143C'><strong>路由选择部分</strong></font>：核心构件是<font color = '#DC143C'><strong>路由选择处理机</strong></font>，其任务是根据所使用的<font color = '#DC143C'><strong>路由选择协议</strong></font>周期性地与其他路由器进行路由信息的交换，以便构建和更新<font color = '#DC143C'><strong>路由表</strong></font></li>
<li><font color = '#DC143C'><strong>分组转发部分</strong></font>：由<font color = '#DC143C'><strong>一组输入端口</strong></font>、<font color = '#DC143C'><strong>交换结构</strong></font>以及<font color = '#DC143C'><strong>一组输出端口</strong></font></li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132030817.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="国际控制报文协议ICMP"><a href="#国际控制报文协议ICMP" class="headerlink" title="国际控制报文协议ICMP"></a>国际控制报文协议ICMP</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202311132032419.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="虚拟专用网和网络地址转换"><a href="#虚拟专用网和网络地址转换" class="headerlink" title="虚拟专用网和网络地址转换"></a>虚拟专用网和网络地址转换</h3><h4 id="虚拟专用网"><a href="#虚拟专用网" class="headerlink" title="虚拟专用网"></a>虚拟专用网</h4><ul>
<li><p><font color = '#DC143C'><strong>虚拟专用网</strong></font>（Virtual Private Network，VPN）：<font color = '#DC143C'><strong>利用公用的因特网</strong></font>作为本机构各专用网之间的通信载体，这样形成的网络又称为虚拟专用网</p>
</li>
<li><p>给专用网内各主机配置的IP地址应该是该<font color = '#DC143C'><strong>专用网所在机构可以自行分配的IP地址</strong></font>，这类IP地址仅在机构内部有效，称为<font color = '#DC143C'><strong>专用地址</strong></font>（Private Address），不需要向因特网的管理机构申请</p>
</li>
<li><p>VPN要保证传输数据的安全性，会将原始的<font color = '#DC143C'><strong>内部IP数据报进行加密</strong></font>，然后再<font color = '#DC143C'><strong>将其封装成为在因特网上传送的外部IP数据报</strong></font></p>
</li>
<li><p>同一机构内不同部门的内部网络所构成的VPN，又称为<font color = '#DC143C'><strong>内联网VPN</strong></font></p>
</li>
<li><p>有时，一个机构的虚拟专用网VPN需要某些外部机构（通常是合作伙伴）参加进来，这样的VPN就称为<font color = '#DC143C'><strong>外联网VPN</strong></font></p>
</li>
<li><p>在外地工作的员工需要访问公司内部的专用网时，只要在任何地点接入因特网，运行驻留在员工PC中的VPN软件，在员工的PC和公司的主机之间建立VPN隧道，就可以访问专用网中的资源，这种虚拟专用网又称为<font color = '#DC143C'><strong>远程接入VPN</strong></font></p>
</li>
</ul>
<h4 id="网络地址转换"><a href="#网络地址转换" class="headerlink" title="网络地址转换"></a>网络地址转换</h4><ul>
<li><font color = '#DC143C'><strong>网络地址转换</strong></font>（NetworkAddress Translation，NAT）技术于1994年被提出，用来缓解IPv4地址空间即将耗尽的问题<ul>
<li>NAT能<font color = '#DC143C'><strong>使大量使用内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源</strong></font></li>
<li>这种方法需要在专用网络连接到因特网的路由器上<font color = '#DC143C'><strong>安装NAT软件</strong></font>。装有NAT软件的路由器称为<font color = '#DC143C'><strong>NAT路由器</strong></font>，它至少要有一个有效的外部全球地址IPg。这样，所有使用内部专用地址的主机在和外部因特网通信时，都要在NAT路由器上将其内部专用地址转换成IPG</li>
<li>如果NAT路由器拥有n（n比较小）个全球IP地址，那么专用网内<font color = '#DC143C'><strong>最多可以同时</strong></font>有n台主机接入因特网。若专用网内的主机数量大于n，则需要轮流使用NAT路由器中数量较少的全球IP地址</li>
<li>由于目前绝大多数基于TCP&#x2F;IP协议栈的网络应用，都使用运输层传输控制协议TCP或用户数据报协议UDP，为了<font color = '#DC143C'><strong>更加有效地利用NAT路由器中的全球IP地址</strong></font>，现在常<font color = '#DC143C'><strong>将NAT转换和运输层端口号结合使用</strong></font>。这样就可以使内部专用网中使用专用地址的<font color = '#DC143C'><strong>大量主机，共用NAT路由器上的1个全球IP地址</strong></font>，因而可以同时与因特网中的不同主机进行通信</li>
<li>将NAT和运输层端口号结合使用，称为<font color = '#DC143C'><strong>网络地址与端口号转换</strong></font>（Network Address and Port Translation,NAPT）。现在很多家用路由器将家中各种智能设备(手机、平板、笔记本电脑、台式电脑、物联网设备等)接入因特网，这种路由器实际上就是一个<font color = '#DC143C'><strong>NAPT路由器</strong></font>，但往往并不运行路由选择协议</li>
<li>尽管NAT（和NAPT）的出现在很大程度上缓解了IPv4地址资源紧张的局面，但<font color = '#DC143C'><strong>NAT（和NAPT）对网络应用并不完全透明</strong></font>，会对某些网络应用产生影响</li>
<li>NAT（和NAPT）的一个重要特点就是<font color = '#DC143C'><strong>通信必须由专用网内部发起，因此拥有内部专用地址的主机不能直接充当因特网中的服务器</strong></font></li>
<li>对于目前P2P这类需要外网主机主动与内网主机进行通信的网络应用，在通过NAT时会遇到问题，需要网络应用自身使用一些特殊的<font color = '#DC143C'><strong>NAT穿透技术</strong></font>来解决</li>
</ul>
</li>
</ul>
<h3 id="IP多播技术"><a href="#IP多播技术" class="headerlink" title="IP多播技术"></a>IP多播技术</h3><h4 id="基本概念-4"><a href="#基本概念-4" class="headerlink" title="基本概念"></a>基本概念</h4><ul>
<li><font color = '#DC143C'><strong>多播</strong></font>（Multicast，也称为组播）是一种实现 “<font color = '#DC143C'><strong>一对多</strong></font>” 通信的技术，与传统单播 “一对一” 通信相比，多播可以<font color = '#DC143C'><strong>极大地节省网络资源</strong></font></li>
<li>在<font color = '#DC143C'><strong>因特网上进行的多播</strong></font>，称为<font color = '#DC143C'><strong>IP多播</strong></font></li>
</ul>
<h4 id="IP多播地址和多播组"><a href="#IP多播地址和多播组" class="headerlink" title="IP多播地址和多播组"></a>IP多播地址和多播组</h4><ul>
<li>在<font color = '#DC143C'><strong>IPv4</strong></font>中，<font color = '#DC143C'><strong>D类地址</strong></font>被作为<font color = '#DC143C'><strong>多播地址（224.0.0.0~239.255.255.255）</strong></font></li>
<li><font color = '#DC143C'><strong>多播地址只能用作目的地址</strong></font>，而不能用作源地址</li>
<li>用每一个D类地址来标识一个多播组，<font color = '#DC143C'><strong>使用同一个IP多播地址接收IP多播数据报的所有主机就构成了一个多播组</strong></font><ul>
<li><font color = '#DC143C'><strong>每个多播组的成员是可以随时变动的</strong></font>，一台主机可以随时加入或离开多播组</li>
<li><font color = '#DC143C'><strong>多播组成员的数量和所在的地理位置也不受限制，一台主机可以属于几个多播组</strong></font></li>
</ul>
</li>
<li>非多播组成员也可以向多播组发送IP多播数据报</li>
<li>与IP数据报相同，IP多播数据报也是 “<font color = '#DC143C'><strong>尽最大努力交付</strong></font>” ，不保证一定能够交付给多播组内的所有成员</li>
<li>IPv4多播地址又可分为<font color = '#DC143C'><strong>预留的多播地址</strong></font>（永久多播地址）、<font color = '#DC143C'><strong>全球范围可用的多播地址</strong></font>以及本地管理的<font color = '#DC143C'><strong>多播地址</strong></font>[RFC 3330]</li>
<li>IP多播可以分为以下两种:<ul>
<li>只在<font color = '#DC143C'><strong>本局域网</strong></font>上进行的<font color = '#DC143C'><strong>硬件多播</strong></font></li>
<li>在<font color = '#DC143C'><strong>因特网</strong></font>上进行的<font color = '#DC143C'><strong>多播</strong></font></li>
</ul>
</li>
</ul>
<h3 id="在局域网上进行硬件多播"><a href="#在局域网上进行硬件多播" class="headerlink" title="在局域网上进行硬件多播"></a>在局域网上进行硬件多播</h3><ul>
<li>由于MAC地址（也称为硬件地址）有多播MAC地址这种类型，因此只要<font color = '#DC143C'><strong>把IPv4多播地址映射成多播MAC地址</strong></font>，即可将IP多播数据报封装在局域网的MAC帧中，而MAC帧首部中的目的MAC地址字段的值，就设置为由IPv4多播地址映射成的多播MAC地址。这样，可以很方便地<font color = '#DC143C'><strong>利用硬件多播来实现局域网内的IP多播</strong></font>。</li>
<li>当给某个多播组的成员主机配置其所属多播组的IP多播地址时，系统就会根据映射规则从该IP多播地址生成相应的局域网多播MAC地址。</li>
<li>因特网号码指派管理局IANA，将自己从IEEE注册管理机构申请到的以太网MAC地址块中从<font color = '#DC143C'><strong>01-00-5E-00-00-00到01-00-5E-7F-FF-FF</strong></font>的多播MAC地址，用于映射IPv4多播地址。<ul>
<li>这些多播MAC地址的<font color = '#DC143C'><strong>左起前25个比特都是相同的</strong></font>，<font color = '#DC143C'><strong>剩余23个比特可以任意变化</strong></font>，因此共有223个。</li>
</ul>
</li>
<li>由于IP多播地址可变化的28比特的前5个比特无法映射到MAC多播地址的低23比特，这会造成<font color = '#DC143C'><strong>IP多播地址与多播MAC地址的映射关系并不是唯一的</strong></font>。</li>
<li>由于IP多播地址与多播MAC地址的映射关系不是唯一的，因此<font color = '#DC143C'><strong>收到IP多播数据报的主机还要在网际层利用软件进行过滤</strong></font>，把不是主机要接收的IP多播数据报丢弃。</li>
</ul>
<h3 id="在因特网上进行IP多播需要的两种协议"><a href="#在因特网上进行IP多播需要的两种协议" class="headerlink" title="在因特网上进行IP多播需要的两种协议"></a>在因特网上进行IP多播需要的两种协议</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012124856.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="网际组管理协议IGMP"><a href="#网际组管理协议IGMP" class="headerlink" title="网际组管理协议IGMP"></a>网际组管理协议IGMP</h3><h4 id=""><a href="#" class="headerlink" title=""></a></h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012128759.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="多播路由选择协议"><a href="#多播路由选择协议" class="headerlink" title="多播路由选择协议"></a>多播路由选择协议</h3><ul>
<li>多播路由选择协议的主要任务是：<font color = '#DC143C'><strong>在多播路由器之间为每个多播组建立一个多播转发树</strong></font><ul>
<li>多播转发树连接多播源和所拥有该多播组成员的路由器</li>
</ul>
</li>
<li>目前有以下两种方法来构建多播转发树：<ul>
<li><font color = '#DC143C'><strong>基于源树</strong></font>（Source-Base Tree）多播路由选择</li>
<li><font color = '#DC143C'><strong>组共享树</strong></font>（Group-Shared Tree）多播路由选择</li>
</ul>
</li>
</ul>
<h4 id="基于源树多播路由选择"><a href="#基于源树多播路由选择" class="headerlink" title="基于源树多播路由选择"></a>基于源树多播路由选择</h4><ul>
<li>基于源树的多播路由选择的最典型算法是<font color = '#DC143C'><strong>反向路径多播</strong></font>（Reverse Path Multicasting，RPM）算法</li>
<li>RPM算法包含以下两个步骤：<ol>
<li>利用<font color = '#DC143C'><strong>反向路径广播</strong></font>（Reverse Path Broadcasting，RPB）算法建立一个<font color = '#DC143C'><strong>广播转发树</strong></font></li>
<li>利用<font color = '#DC143C'><strong>剪枝</strong></font>（Pruning）算法，剪除广播转发树中的下游非成员路由器，获得一个<font color = '#DC143C'><strong>多播转发树</strong></font></li>
</ol>
</li>
<li>要建立广播转发树，可以使用<font color = '#DC143C'><strong>洪泛</strong></font>（Flooding）法</li>
<li>利用<font color = '#DC143C'><strong>反向路径广播RPB算法</strong></font>生成的<font color = '#DC143C'><strong>广播转发树</strong></font>，不会存在环路，因此可以避免广播分组在环路中兜圈。 </li>
<li>RPB算法的要点是：每一台路由器在收到一个广播分组时，先<font color = '#DC143C'><strong>检查该广播分组是否是从源点经最短路径传送来的</strong></font>。<ul>
<li>若是，本路由器就从自己除刚才接收该广播分组的接口的所有其他接口转发该广播分组。</li>
<li>否则，丢弃该广播分组。</li>
<li>如果本路由器有好几个邻居路由器都处在到源点的最短路径上，也就是<font color = '#DC143C'><strong>存在好几条同样长度的最短路径</strong></font>，那么只能选取一条最短路径。选取的规则是这几条最短路径中的<font color = '#DC143C'><strong>邻居路由器的IP地址最小的那条最短路径</strong></font>。</li>
</ul>
</li>
<li>RPB中 “反向路径” 的意思是：<font color = '#DC143C'><strong>在计算最短路径时把源点当作终点</strong></font>。</li>
</ul>
<h4 id="组共享树多播路由选择"><a href="#组共享树多播路由选择" class="headerlink" title="组共享树多播路由选择"></a>组共享树多播路由选择</h4><ul>
<li>组共享树多播路由选择采用<font color = '#DC143C'><strong>基于核心的分布式生成树算法</strong></font>来建立共享树。<ul>
<li>该方法在<font color = '#DC143C'><strong>每个多播组</strong></font>中指定一个<font color = '#DC143C'><strong>核心（core）路由器</strong></font>，以该路由器为<font color = '#DC143C'><strong>根</strong></font>，建立一棵<font color = '#DC143C'><strong>连接多播组的所有成员路由器的生成树</strong></font>，作为多播转发树。</li>
</ul>
</li>
<li>每个多播组中除了核心路由器，其他所有成员路由器都会向自己多播组中的核心路由器单播<font color = '#DC143C'><strong>加入报文</strong></font>。<ul>
<li>加入报文通过单播朝着核心路由器转发，直到它到达已经属于<font color = '#DC143C'><strong>该多播生成树的某个节点</strong></font>或者<font color = '#DC143C'><strong>直接到达该核心路由器</strong></font>。</li>
<li>加入报文所经过的路径，就确定了一条<font color = '#DC143C'><strong>从单播该报文的边缘节点到核心路由器之间的分支</strong></font>，而这个新分支就被<font color = '#DC143C'><strong>嫁接</strong></font>到现有的<font color = '#DC143C'><strong>多播转发树</strong></font>上。</li>
</ul>
</li>
</ul>
<h4 id="因特网的多播路由选择协议"><a href="#因特网的多播路由选择协议" class="headerlink" title="因特网的多播路由选择协议"></a>因特网的多播路由选择协议</h4><ul>
<li><font color = '#DC143C'><strong>目前还没有在整个因特网范围使用的多播路由选择协议</strong></font>。下面是一些建议使用的多播路由选择协议:<ul>
<li>距离向量多播路由选择协议(Distance Vector Multicast Routing Protocol，DVMRP)[RFC 1075]。</li>
<li>开放最短路径优先的多播扩展(Multicast Extensions to OSPF，MOSPF) [RFC 1585]。</li>
<li>协议无关多播-稀疏方式(Protocol Independent Multicast-Sparse Mode，PIM-SM) [RFC 2362]。</li>
<li>协议无关多播-密集方式(Protocol Independent Multicast-Dense Mode， PIM-DM) [RFC 3973]。</li>
<li>基于核心的转发树(Core Based Tree，CBT)[RFC 2189，RFC 2201]。</li>
</ul>
</li>
<li>尽管因特网工程任务组IETF努力推动着因特网上的<font color = '#DC143C'><strong>全球多播主干网</strong></font>(Multicast Backbone On the Internet, MBONE)的建设，但至今在因特网上的IP多播还没有得到大规模的应用。<ul>
<li>主要原因是：<font color = '#DC143C'><strong>改变一个已成功运行且广泛部署的网络层协议是一件极其困难的事情</strong></font>。</li>
<li>目前IP多播主要应用在一些局部的园区网络、专用网络或者虚拟专用网中。</li>
</ul>
</li>
</ul>
<h3 id="移动IP技术概述"><a href="#移动IP技术概述" class="headerlink" title="移动IP技术概述"></a>移动IP技术概述</h3><h4 id="移动性对因特网应用的影响"><a href="#移动性对因特网应用的影响" class="headerlink" title="移动性对因特网应用的影响"></a>移动性对因特网应用的影响</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012152888.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="相关基本概念"><a href="#相关基本概念" class="headerlink" title="相关基本概念"></a>相关基本概念</h4><ul>
<li><font color = '#DC143C'><strong>移动IP</strong></font>（Mobile IP）是因特网工程任务组IETF开发的一种技术[RFC 3344]，该技术使得<font color = '#DC143C'><strong>移动主机在各网络之间漫游时，仍然能够保持其原来的IP地址不变</strong></font></li>
<li>移动IP技术还为因特网中的非移动主机提供了相应机制，使得它们能够将IP数据报正确发送到移动主机</li>
</ul>
<p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012156884.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="基本工作原理"><a href="#基本工作原理" class="headerlink" title="基本工作原理"></a>基本工作原理</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012157701.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="IPv6引进的主要变化"><a href="#IPv6引进的主要变化" class="headerlink" title="IPv6引进的主要变化"></a>IPv6引进的主要变化</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012200758.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="IPv6地址"><a href="#IPv6地址" class="headerlink" title="IPv6地址"></a>IPv6地址</h3><h4 id="地址空间大小"><a href="#地址空间大小" class="headerlink" title="地址空间大小"></a>地址空间大小</h4><ul>
<li>在IPv6中，每个地址占<font color = '#DC143C'><strong>128个比特</strong></font><ul>
<li>如果<font color = '#DC143C'><strong>整个地球表面</strong></font>（包括陆地和水面）都覆盖着需要IPv6地址的通信设备，那么IPv6允许<font color = '#DC143C'><strong>每平方米拥有7 * 10^23个IPv6地址</strong></font></li>
<li>如果IPv6地址的分配速率是<font color = '#DC143C'><strong>每微秒分配100万个IPv6地址</strong></font>，则需要10^19年的时间才能将所有可能的地址分配完毕</li>
</ul>
</li>
<li>很显然，这样巨大的地址空间在<font color = '#DC143C'><strong>采用合理编址方法</strong></font>的情况下，<font color = '#DC143C'><strong>在可预见的未来是不会用完的</strong></font></li>
</ul>
<h4 id="表示方法-1"><a href="#表示方法-1" class="headerlink" title="表示方法"></a>表示方法</h4><ul>
<li>在IPv6地址的冒号十六进制记法的基础上，再使用 <font color = '#DC143C'><strong>“左侧零” 省略和 “连续零” 压缩</strong></font>，可使IPv6地址的表示更加简洁。<ul>
<li>“左侧零” 省略是指两个冒号间的十六进制数中最前面的一串0可以省略不写。</li>
<li>“连续零” 压缩是指一连串连续的0可以用一对冒号取代。</li>
</ul>
</li>
<li><font color = '#DC143C'><strong>在一个IPv6地址中只能使用一次“连续零”压缩</strong></font>，否则会导致歧义。</li>
<li><font color = '#DC143C'><strong>冒号十六进制记法还可结合点分十进制的后缀</strong></font>。这在IPv4向IPv6过渡阶段非常有用。</li>
<li>CIDR的斜线表示法在IPv6中仍然可用。</li>
</ul>
<h4 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012219123.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="从IPv4向IPv6过渡"><a href="#从IPv4向IPv6过渡" class="headerlink" title="从IPv4向IPv6过渡"></a>从IPv4向IPv6过渡</h3><ul>
<li>因特网上使用IPv4的路由器的数量太大，要让所有路由器都改用IPv6并不能一蹴而就。因此，<font color = '#DC143C'><strong>从IPv4转变到IPv6只能采用逐步演进的办法</strong></font></li>
<li>另外，<font color = '#DC143C'><strong>新部署的IPv6系统必须能够向后兼容</strong></font>，也就是IPv6系统必须能够接收和转发IPv4数据报，并且能够为IPv4数据报选择路由</li>
<li>下面介绍两种由IPv4向IPv6过渡的策略：<ul>
<li><font color = '#DC143C'><strong>使用双协议栈</strong></font></li>
<li><font color = '#DC143C'><strong>使用隧道技术</strong></font></li>
</ul>
</li>
</ul>
<h4 id="使用双协议栈"><a href="#使用双协议栈" class="headerlink" title="使用双协议栈"></a>使用双协议栈</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012225913.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="使用隧道技术"><a href="#使用隧道技术" class="headerlink" title="使用隧道技术"></a>使用隧道技术</h4><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012225538.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="网际控制报文协议ICMPv6"><a href="#网际控制报文协议ICMPv6" class="headerlink" title="网际控制报文协议ICMPv6"></a>网际控制报文协议ICMPv6</h3><h4 id="概述-7"><a href="#概述-7" class="headerlink" title="概述"></a>概述</h4><ul>
<li>由于IPv6与IPv4一样，都<font color = '#DC143C'><strong>不确保数据报的可靠交付</strong></font>，因此IPv6也需要使用网际控制报文协议ICMP来向发送IPv6数据报的源主机<font color = '#DC143C'><strong>反馈一些差错信息</strong></font>，相应的ICMP版本为ICMPv6</li>
<li>ICMPv6比ICMPv4要复杂的多，它<font color = '#DC143C'><strong>合并了原来的地址解析协议ARP和网际组管理协议IGMP的功能</strong></font>。因此与IPv6配套使用的网际层协议就只有ICMPv6这一个协议</li>
</ul>
<h4 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h4><ul>
<li><font color = '#DC143C'><strong>ICMPv6报文需要封装成IPv6数据报进行发送</strong></font></li>
</ul>
<h4 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h4><ul>
<li>ICMP报文可被用来报告差错、获取信息、探测邻站或管理多播通信</li>
<li>在对ICMPv6报文进行分类时，不同的RFC文档使用了不同的策略</li>
</ul>
<h3 id="软件定义网络"><a href="#软件定义网络" class="headerlink" title="软件定义网络"></a>软件定义网络</h3><p><img src="https://kolin-blog.oss-cn-shanghai.aliyuncs.com/blog/202312012236511.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h2>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="category-chain-item">计算机网络</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Network/" class="print-no-link">#Network</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Computer Network</div>
      <div>https://www.renkelin.vip/2023/10/26/Network/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Kolin</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>October 26, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/01/Hadoop/" title="Hadoop">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Hadoop</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/10/20/Algorithm/" title="Algorithm">
                        <span class="hidden-mobile">Algorithm</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"VNSy36PGiQCPwyRb6AukmG4w-gzGzoHsz","appKey":"yzHhLZjFMNqrtHhPeHVoWzF2","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="mailto:renkelin00@gmail.com?subject=Interested+In+Your+Blog" target="_blank" rel="nofollow noopener"><span>Contact me</span></a> <i class="iconfont icon-love"></i> <a href="mailto:renkelin00@gmail.com?subject=Interested+In+Your+Blog" target="_blank" rel="nofollow noopener"><span>renkelin00@gmail.com</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
